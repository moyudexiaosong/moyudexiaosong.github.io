

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.jpg">
  <link rel="icon" href="/img/icon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="Vue3.x从零开始学 组件篇01.全局组件和复用性一张图了解组件概念 一个完整的页面被分割成多个模块，这些模块就是组件。有两个以上的DOM元素，就可以用组件开发。  Vue中的组件是页面中的一部分，通过层层拼装，最终形成了一个完整的组件。这也是目前前端最流行的开发方式。 Vue.createApp实际是建立一个Vue的实例，也就是第一个根组件。 1234const app&#x3D;Vue.create">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3.x 组件篇">
<meta property="og:url" content="http://example.com/2022/08/25/vue3-x-%E7%BB%84%E4%BB%B6%E7%AF%87/index.html">
<meta property="og:site_name" content="摸鱼之家">
<meta property="og:description" content="Vue3.x从零开始学 组件篇01.全局组件和复用性一张图了解组件概念 一个完整的页面被分割成多个模块，这些模块就是组件。有两个以上的DOM元素，就可以用组件开发。  Vue中的组件是页面中的一部分，通过层层拼装，最终形成了一个完整的组件。这也是目前前端最流行的开发方式。 Vue.createApp实际是建立一个Vue的实例，也就是第一个根组件。 1234const app&#x3D;Vue.create">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/photo21.jpeg">
<meta property="article:published_time" content="2022-08-25T06:27:54.000Z">
<meta property="article:modified_time" content="2022-09-21T16:41:10.803Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/photo21.jpeg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>vue3.x 组件篇 - 摸鱼之家</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.1","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz","app_key":"kMsGLN3hzkQJuLrmqQBgquFF","server_url":"https://awhbuajs.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>快乐老家</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                档案馆
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                目录
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/photo21.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="vue3.x 组件篇"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-25 14:27" pubdate>
          August 25, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          22k words
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">vue3.x 组件篇</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on 16 days ago
                  
                
              </p>
            
            <div class="markdown-body">
              
              <hr>
<h1 id="Vue3-x从零开始学-组件篇"><a href="#Vue3-x从零开始学-组件篇" class="headerlink" title="Vue3.x从零开始学 组件篇"></a>Vue3.x从零开始学 组件篇</h1><h3 id="01-全局组件和复用性"><a href="#01-全局组件和复用性" class="headerlink" title="01.全局组件和复用性"></a>01.全局组件和复用性</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc32">一张图了解组件概念</a></p>
<p>一个完整的页面被分割成多个模块，这些模块就是组件。有两个以上的DOM元素，就可以用组件开发。</p>
<p><img src="/../img/image-20220919194751728.png" srcset="/img/loading.gif" lazyload alt="image-20220919194751728"></p>
<p><strong>Vue中的组件是页面中的一部分，通过层层拼装，最终形成了一个完整的组件。这也是目前前端最流行的开发方式。</strong></p>
<p><code>Vue.createApp</code>实际是建立一个Vue的实例，也就是第一个<code>根组件</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;h2&gt;糖果屋&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;div&gt;小明明&lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc34">全局组件的定义</a></p>
<p>现在页面有两个dom元素组成，可以把这两部分拆分成两个全局的字组件。代码如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/body&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; </span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">        &lt;website /&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">        &lt;describe/&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">		`</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;) </span></span><br><span class="language-javascript"><span class="language-xml">    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;website&#x27;</span>,&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;h2&gt;糖果屋&lt;/h2&gt;`</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;describe&#x27;</span>,&#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;小明明&lt;/div&gt;`</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<p>业务逻辑复杂这样拆分，会降低开发难度。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc35">组件的可复用性讲解</a></p>
<p>定义一个新的计数组件count，每次点击按钮，组件中的count变量自动加1.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span>&#123;<br>            <span class="hljs-attr">count</span>:<span class="hljs-number">0</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123;count&#125;&#125;&lt;button @click=&quot;count++&quot;&gt;增加1&lt;/button&gt;&lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>在根组件中复用：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;website /&gt;</span><br><span class="hljs-string">        &lt;describe /&gt;</span><br><span class="hljs-string">        &lt;count/&gt;</span><br><span class="hljs-string">                &lt;count/&gt;</span><br><span class="hljs-string">                &lt;count/&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在浏览器中进行预览，你会发现对一个<code>count</code>变量进行加一动作后，只有他自己的变量会发生改变，不会影响别的组件里的<code>count</code>变量，所以每个组件都是互不干扰的，即使是同一类组件。</p>
<p>就是因为这个特性，Vue中的组件就具有了复用性。</p>
<p>弊端：<strong>只要定义了，处处可以使用，性能不高，会占用系统资源，但是使用起来简单。</strong></p>
<h3 id="02-局部组件"><a href="#02-局部组件" class="headerlink" title="02.局部组件"></a>02.局部组件</h3><p>局部组件可以看成一个变量，然后在使用的地方注册这个组件，才可以使用。局部组件的最大好处就是只有在使用的时候，才会耗费系统资源，不像全局组件一样，一直都存在。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc39">创建局部组件</a></p>
<p>注册局部组件，可以理解成声明一个变量，这个变量是一个对象，所以最外层我们使用大括号。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> counter = &#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;count&#125;&#125;&lt;button @click=&quot;count++&quot;&gt;增加1&lt;/button&gt;&lt;/div&gt;`</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>不同于全局组件，声明完组件后，还要在<code>vue.CreateApp（ ）</code>方法里进行注册。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>    <span class="hljs-attr">components</span>:&#123;counter&#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;counter/&gt;</span><br><span class="hljs-string">		`</span>&#125;) <br></code></pre></td></tr></table></figure>
<p>这是简写方法，正确的写法应该是<code>components: &#123;自定义一个命名:组件名&#125;</code> 。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-attr">components</span>: &#123; <span class="hljs-attr">xmm</span>: counter &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;jspang /&gt;</span><br></code></pre></td></tr></table></figure>
<p>需要注意的是，局部变量也是拥有独立性的，所以可以进行复用。</p>
<h3 id="03-父子组件的静态和动态传值"><a href="#03-父子组件的静态和动态传值" class="headerlink" title="03. 父子组件的静态和动态传值"></a>03. 父子组件的静态和动态传值</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc314">父组件向子组件传值（静态传值）</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;Dad&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son name=&#x27;xmm&#x27;/&gt;`</span><br>    &#125;) <br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;name&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;Son &#123;&#123;name&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>使用子组件里的props进行接收父组件传过来的参数，在子组件里作为字面量使用。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc315">动态数据作为参数</a></p>
<p>如果想让代码更加的灵活，这里可以使用动态参数的传递。</p>
<p>动态参数传递首先要把参数的具体值放到Vue的<strong>数据项</strong>里，也就是<code>data</code>属性里。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">mingzi</span>:<span class="hljs-string">&#x27;sym&#x27;</span><br>            &#125;<br>        &#125;,<br><span class="hljs-comment">//在父组件的data属性里声明要传入的变量名，在模版中将子组件的变量名与父组件中的变量名进行绑定</span><br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;Dad&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son :name=&#x27;mingzi&#x27;/&gt;`</span><br>    &#125;) <br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;name&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;Son &#123;&#123;name&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p><strong>静态参数这里还有一个小坑需要说明一下，就是静态传递的只能是字符串类型<code>String</code>，而动态传参的就可以是多种类型了，甚至是一个函数(方法).</strong></p>
<p>举例说明，比如我们现在改回静态传参，而传递的内容是数字<code>123</code>,但在模板中使用<code>typeof</code>查看属性时，仍然是字符串（String）。</p>
<p>改为静态传参，参数为<code>123</code>.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;Son name=&quot;123&quot; /&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>在子组件用<code>typeof</code>查看类型，会发现仍然是<code>string</code>类型.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;name&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123; typeof name&#125;&#125; div &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>但是改为动态传参，就变成了数字类型。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-number">123</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son :name=&quot;name&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc316">参数为函数时的用法</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span>&#123;<br>                <span class="hljs-attr">pay</span>:<span class="hljs-function">()=&gt;</span>&#123;<br>                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;you are free&#x27;</span>)<br>                &#125;<br>            &#125;<br>        &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;makeMoney :pay=&#x27;pay&#x27;&gt;`</span><br>    &#125;) <br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;makeMoney&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;pay&#x27;</span>],<br>        <span class="hljs-attr">methods</span>:&#123;<br>            <span class="hljs-title function_">handClick</span>(<span class="hljs-params"></span>)&#123;<br>                <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;pay money&#x27;</span>);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pay</span>();<br>            &#125;<br>        &#125;, <br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;button @click=&#x27;handClick&#x27;&gt;和小姐姐打招呼&lt;/button&gt;`</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>声明全局子组件，父组件传入的参数为pay函数，进行数据绑定后子组件的方法就可以调用传入的子函数。</p>
<h3 id="04-组件传值时的校验操作"><a href="#04-组件传值时的校验操作" class="headerlink" title="04. 组件传值时的校验操作"></a>04. 组件传值时的校验操作</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc319">对类型的校验</a></p>
<p>有时候我们希望传递过来的属性是一个某一个特定类型，这就涉及到了对参数类型的判断。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span><br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>Vue支持的校验类型包括:String、Boolean、Array、Object、Function和Symbol。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc320">必填校验和默认值设置</a></p>
<p><strong>required必填项</strong></p>
<p>如果要求组该项必须传递参数，可以使用<code>required</code>来校验</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>                <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的校验规则就是，name的值必须是字符串，并且不可以不传值。</p>
<p><strong>default默认值</strong></p>
<p>再来看一下默认值的写法，在原来写<code>required</code>的地方直接写<code>default</code>就可以了。比如写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>                <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;JSPang.com&#x27;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的意思就是在调用组件时，如果不传递参数，则默认值为<code>JSPang.com</code>。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc321">精准校验-validator</a></p>
<p>当要求传递的字符串中必须包括<code>JSPang</code>这几个字符，就可以用<code>validator</code>来进行校验。它是一个函数，并接受一个<code>value</code>值，这个value就是传递过来的值。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    			<span class="hljs-keyword">return</span> &#123;<br>        		<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;小明明&#x27;</span><br>    		&#125;<br>		&#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;loveU :name=&#x27;name&#x27;/&gt;`</span><br>    &#125;)<br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;loveU&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:&#123;<br>            <span class="hljs-attr">name</span>:&#123;<br>                <span class="hljs-attr">type</span>:<span class="hljs-title class_">String</span>,<br>                <span class="hljs-attr">required</span>:<span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">validator</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)&#123;<br>                    <span class="hljs-title function_">alert</span>(value.<span class="hljs-title function_">search</span>(<span class="hljs-string">&#x27;明&#x27;</span>)!=-<span class="hljs-number">1</span>)<br>                &#125;<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;LOVE U &#123;&#123;name&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;) <br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>因为使用<code>search</code>来验证，返回来的是字符串出现的位置，没有找到时才显示<code>-1</code>。所以这里判定如果不为<code>-1</code>就是包含。</p>
<h3 id="05-组件中重要机制-单项数据流"><a href="#05-组件中重要机制-单项数据流" class="headerlink" title="05.组件中重要机制-单项数据流"></a>05.组件中重要机制-单项数据流</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc323">编写一个计数器</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> counter=&#123;     <br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;num&#x27;</span>] ,       <br>        <span class="hljs-attr">methods</span>:&#123;&#125;,<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            &#123;&#123;num&#125;&#125;</span><br><span class="hljs-string">            &lt;button @click=&#x27;num++&#x27;&gt;纪阿姨&lt;/button&gt;</span><br><span class="hljs-string">            &lt;/div&gt;</span><br><span class="hljs-string">        `</span>&#125;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; <br>    	<span class="hljs-attr">components</span>:&#123;counter&#125;,<br>    	<span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    	    <span class="hljs-keyword">return</span> &#123;<br>    	        <span class="hljs-attr">count</span>:<span class="hljs-number">5</span>,<br>    	    &#125;<br>    	&#125;,<br>    	<span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    	    &lt;counter :num=&#x27;count&#x27;/&gt;`</span><br>    &#125;)   <br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>在父组件里定义数据后和组件成功绑定了，但运行后会发现按钮并不进行加一操作，这就是单向数据流机制限制的结果。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc324">单向数据流概念</a></p>
<p>什么是单向数据流？官方的解释还是比较晦涩难懂的。</p>
<ul>
<li>可以简单的说：<strong>数据从父级组件传递给子组件，只能单向绑定。子组件内部不能直接修改从父组件传递过来的数据。</strong></li>
</ul>
<p>这也就是为什么，我们上面写的程序不能使用的原因了。</p>
<p>如何修改这个程序让其好用？需要在组件内的数据项中声明一个变量，把父组件传递过来的变量赋值给内部变量，然后就可以随意修改了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">newCounter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &#123;&#123;newCounter&#125;&#125;</span><br><span class="hljs-string">        &lt;button @click=&quot;this.newCounter+=1&quot;&gt;增加数量&lt;/button&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这样就可以进行修改了。当我们通过程序，更好的理解了什么是<code>单项数据流</code>后，我们再来总结一下。<strong>单向数据流就是父组件可以向子组件传递数据，但是子组件不能修改数据。</strong></p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc325">为什么要有单向数据流机制</a></p>
<p>单项数据流的最终目的，就是为了降低组件的耦合度和独立性。比如现在页面上同时调用了三个<code>&lt;counter/&gt;</code>组件，没有单项数据流的机制，很容易变成一个组件数值变化，其他组件的数值也跟着变化的现象。让页面组件的数据耦合在一起，没办法独立使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<h3 id="06-Non-props使用技巧"><a href="#06-Non-props使用技巧" class="headerlink" title="06.Non-props使用技巧"></a>06.Non-props使用技巧</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc327">基础页面和子组件的准备</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">        </span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;Love You&lt;/div&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">            &lt;hello /&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">             `</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>,&#123;</span></span><br><span class="language-javascript"><span class="language-xml">            <span class="hljs-attr">template</span>:<span class="hljs-string">`</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">            &lt;h3&gt;Hello,XMM!&lt;/h3&gt;`</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc328">初始Non-props 属性</a></p>
<p>上面的代码，子组件里没有可供接受参数的props`,但这时候在调用的时候，是仍然可以传值的。</p>
<p>打开控制台，查看<code>Elements</code>标签，可以看到此时的<code>&lt;h3&gt;</code>标签上已经由了<code>msg=good</code>这样的属性，也就是父组件直接把属性移植给了子属性。</p>
<p><img src="/../img/image-20220920005944549.png" srcset="/img/loading.gif" lazyload alt="image-20220920005944549"></p>
<p>如果要消除这种移植，可以在子组件里接受这个属性，但并不在<code>template</code>里使用他。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;msg&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3&gt;Hello,XMM!&lt;/h3&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候在打开浏览器的<code>Elements</code>标签查看，就没有多余的属性了。</p>
<p><img src="/../img/image-20220920010258899.png" srcset="/img/loading.gif" lazyload alt="image-20220920010258899"></p>
<p>总结：<code>Non-prop</code>属性就是父组件向子组件传递参数的时候，如果子组件不给接受参数的接口。这个时候父组件就会直接把属性完全复制给子组件，子组件也是可以得到属性值的。</p>
<p>最常见的使用案例就是直接在标签上写CSS样式。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hello style=&quot;color:red;&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候子组件会直接得到这个属性，也就把字体变成了红色。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc329">inheritAttrs属性</a></p>
<p>有些时候我们就是不想接受参数，也不想让<code>Non-props</code>属性起作用，这时候可以在子组件上使用<code>inheritAttrs</code>是否继承父属性来解决这个问题。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h3&gt;Hello World&lt;/h3&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候style标签就不会再被复制到子组件上了，组件上的<code>Hello World</code>也不会变成红色了。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc330">Non-Prop多节点失效解决方法</a></p>
<p>刚才说了，组件在没有接受参数时，会把属性自动复制到组件的根节点上，但如果组件不是一个根节点，比如写成下面的样子，复制就会失效。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>解决方案：</p>
<ol>
<li>增加一个根节点</li>
<li>单独继承，如下：</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">pp.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3 v-bind=&quot;$attrs&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>注意，<code>$attrs</code>不是单指某一个属性，而是指全部属性，<code>v-bind=&quot;$attrs&quot;</code>的意思是把父组件传递的所有参数属性都复制到子组件当中。</p>
<p>如果想只复制一个属性，比如现在我们只复制一个属性<code>style</code>，就这个这么写。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3 v-bind=&#x27;$attrs&#x27;&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3 :style=&#x27;$attrs.style&#x27;&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><img src="/../img/image-20220920011421602.png" srcset="/img/loading.gif" lazyload alt="image-20220920011421602"></p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc331">在业务逻辑中使用Non-props属性</a></p>
<p>刚才讲的都是在标签上使用<code>Non-props</code>属性，如果想在业务逻辑中使用<code>Non-props</code>属性也是可以的。比如在生命周期中使用:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>,&#123;<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>.<span class="hljs-property">msg</span>)<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3 v-bind=&#x27;$attrs&#x27;&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3 :style=&#x27;$attrs.style&#x27;&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello,XMM!&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后到浏览器中的控制台进行查看，就可以看到打印出了<code>good</code>字样。</p>
<p><code>this.$attrs</code>是Vue的一个常用属性，我们需要善于利用。</p>
<h3 id="07-组件中通过事件进行通信"><a href="#07-组件中通过事件进行通信" class="headerlink" title="07 组件中通过事件进行通信"></a>07 组件中通过事件进行通信</h3><p>前面我们讲了单项数据流的概念，这节学习一下组件如何通过事件向父组件传递参数，打破单项数据流的限制。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc333">编写计数器案例</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const app=Vue.createApp(&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            data()&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                return&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                    count:0</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                &#125;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;,</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template:`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">counter</span> <span class="hljs-attr">:num</span>=<span class="hljs-string">&#x27;count&#x27;</span>/&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">counter</span> <span class="hljs-attr">:num</span>=<span class="hljs-string">&#x27;count&#x27;</span>/&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">counter</span> <span class="hljs-attr">:num</span>=<span class="hljs-string">&#x27;count&#x27;</span>/&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">             `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.component(&#x27;counter&#x27;,&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            props:[&#x27;num&#x27;],</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template:`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">num</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&#x27;num++&#x27;</span>&gt;</span>增加<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.mount(&quot;#app&quot;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p>上面的代码，当我们在浏览器中点击增加时，是不能增加<code>counter</code>的值的，这就是Vue<code>单向数据流</code>的限制。</p>
<p>但是如果，我们就是想在子组件里改变父组件传递过来的值，怎么办呢？</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc334">子组件调用父组件事件</a></p>
<p>先在父组件里编写一个方法，叫做<code>handleAddCounter</code>。每执行一次，数据项里的<code>counter</code>加一。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> += <span class="hljs-number">1</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>父组件有了这个方法，就可以改变<code>couter</code>数据行的值了，但子组件并不能调用他，需要先在<code>子组件</code>的模板<code>template</code>中编写一个<code>click</code>事件，然后用<code>$emit</code>调用父组件的响应事件<code>add</code>。具体代码如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>  	<span class="hljs-comment">//需要在这里声明</span><br>    <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;add&#x27;</span>],<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &#123;&#123;counter&#125;&#125;&lt;button @click=&quot;handleClick&quot;&gt;增加数量&lt;/button&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这个<code>add</code>就是父组件模板<code>template</code>中的响应事件，由响应事件调用方法<code>handleAdCounter</code>。</p>
<p>父组件里的模板：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">            &lt;counter :counter=&quot;counter&quot; @add=&quot;handleAddCounter&quot;/&gt;  </span><br><span class="hljs-string">        `</span><br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc335">子组件向父组件传递参数</a></p>
<p>子组件想要向父组件传值，可以在子组件中这样编写。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>, <span class="hljs-number">2</span>)<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>然后在父组件中接受这个参数<code>param</code> ，在控制台进行打印。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params">param</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(param)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> += param<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>还有更好的选择，就是把所有业务逻辑都放在子组件中，然后把结果传递给父组件：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>      	<span class="hljs-comment">//这里传递的counter是自组件的变量，得到一个值后传给父组件</span><br>        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">3</span>)<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>父组件直接接受结果就可以了</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params">param</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(param)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> = param<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc336">对传递值的校验</a></p>
<p>在子组件向父组件传递值的时候，还可以开启校验功能。比如现在我们要求传递到add中的值，不大于20。如果大于20就进行警告。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">emits</span>: &#123;<br>    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> num &lt; <span class="hljs-number">20</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p><img src="/../img/image-20220920015500642.png" srcset="/img/loading.gif" lazyload alt="image-20220920015500642"></p>
<h3 id="08-组件中插槽的使用Slot-1"><a href="#08-组件中插槽的使用Slot-1" class="headerlink" title="08. 组件中插槽的使用Slot -1"></a>08. 组件中插槽的使用Slot -1</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc339">初识插槽</a></p>
<p>插槽的声明：在子组件中加入<code>&lt;slot&gt;&lt;/slot&gt;</code>标签，然后在父组件中使用子组件的双标签进行调用。具体代码如下:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const app = Vue.createApp(&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>欢迎光临<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Caidan</span>&gt;</span> 小明明 <span class="hljs-tag">&lt;/<span class="hljs-name">Caidan</span>&gt;</span>`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.component(&#x27;Caidan&#x27;, &#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 串串店 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const vm = app.mount(&quot;#app&quot;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p>插槽支持任何的DOM元素，比如加入一个<code>&lt;div&gt;</code>然后让字体变成红色和50像素的字体大小。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">		&lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;Caidan&gt; </span><br><span class="hljs-string">    		&lt;div style=&quot;color:red;font-size:50px;&quot;&gt;小明明&lt;/div&gt; </span><br><span class="hljs-string">    &lt;/Caidan&gt;`</span><br></code></pre></td></tr></table></figure>
<p>比如现在调用两次<code>&lt;ji-shi&gt;</code>组件，给与不同的样式也是可以的。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">		&lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;Caidan&gt; </span><br><span class="hljs-string">    		&lt;div style=&quot;color:red;font-size:50px;&quot;&gt;小明明&lt;/div&gt; </span><br><span class="hljs-string">    &lt;/Caidan&gt;</span><br><span class="hljs-string">    &lt;Caidan&gt; </span><br><span class="hljs-string">    		&lt;div style=&quot;color:blue;font-size:25px;&quot;&gt;小明明&lt;/div&gt; </span><br><span class="hljs-string">    &lt;/Caidan&gt;`</span><br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc340">插槽中使用子组件</a></p>
<p>插槽可以强大到直接使用<code>子组件</code>，接下来就作一个在插槽中使用子组件的小例子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const app = Vue.createApp(&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>欢迎光临<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Caidan</span>&gt;</span> </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:blue;font-size:25px;&quot;</span>&gt;</span>小明明<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">list</span> /&gt;</span>      </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Caidan</span>&gt;</span>`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.component(&#x27;Caidan&#x27;, &#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 串串店 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.component(&#x27;list&#x27;,&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template:`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;color:yellow;font-size:30px;&#x27;</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                吃串串</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const vm = app.mount(&quot;#app&quot;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc341">插槽中使用动态数据</a></p>
<p>插槽中也可以直接使用动态数据，也就是我们常说的数据项，比如定义一个数据项,然后在插槽中使用，直接就可以使用了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const app = Vue.createApp(&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            data()&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">              return&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                customer:&#x27;小明明&#x27;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">              &#125;  </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;,</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>欢迎光临<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Caidan</span>&gt;</span> </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:blue;font-size:25px;&quot;</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">customer</span>&#125;&#125;</span><span class="language-xml">    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>     </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">Caidan</span>&gt;</span>`</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        app.component(&#x27;Caidan&#x27;, &#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            data()&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">              return&#123;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                customer:&#x27;小琳琳&#x27;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">              &#125;  </span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            &#125;,</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            template: `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> 串串店 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        `</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        &#125;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">        const vm = app.mount(&quot;#app&quot;)</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="language-xml">    </span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p>这里有一个变量作用域的问题，子组件和父组件都有一个数据项<code>customer</code>，我们得出了一个结论：</p>
<ul>
<li>父模板里调用的数据属性，使用的都是父模板里的数据</li>
<li>子模板里调用的数据属性，使用的都是子模板里的数据</li>
</ul>
<h3 id="09-组件中插槽的使用Slot-2"><a href="#09-组件中插槽的使用Slot-2" class="headerlink" title="09. 组件中插槽的使用Slot-2"></a>09. 组件中插槽的使用Slot-2</h3><p>插槽有两个编写方法，使用插槽的默认值或具名插槽。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc344">插槽默认值的写法</a></p>
<p>在文件中编写一个全局的组件<code>JiShi</code>，默认值的关键语法就是在<code>&lt;slot&gt;</code>插槽中直接输入值就可以了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Caidan&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            你选择了</span><br><span class="hljs-string">            &lt;slot&gt;</span><br><span class="hljs-string">            		&lt;span style=&quot;color:green;&quot;&gt;咖喱棒&lt;/span&gt;</span><br><span class="hljs-string">            &lt;/slot&gt;</span><br><span class="hljs-string">            作为主食。</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>现在这种编写方法，在有值传递过来的时候，会显示正常的值，没有值的时候就会显示默认值”咖喱棒”。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc345">具名插槽的使用</a></p>
<p>在一个组件需要用到多个插槽的情况下，为了区分这些插槽，需要为插槽命名。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;HongLangMan&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">                &lt;slot name=&quot;one&quot;&gt;&lt;/slot&gt;</span><br><span class="hljs-string">                &lt;div&gt;2.点菜&lt;/div&gt;</span><br><span class="hljs-string">                &lt;slot name=&quot;two&quot;&gt;&lt;/slot&gt;</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在父组件调用的时候传递对应的值，比如把代码写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hong-lang-man&gt;</span><br><span class="hljs-string">            &lt;template v-slot:one&gt;</span><br><span class="hljs-string">            		&lt;div&gt;1.选座&lt;/div&gt;</span><br><span class="hljs-string">            &lt;/template&gt;</span><br><span class="hljs-string">            &lt;template v-slot:two&gt;</span><br><span class="hljs-string">            		&lt;div&gt;3.恰饭&lt;/div&gt;</span><br><span class="hljs-string">            &lt;/template&gt;</span><br><span class="hljs-string">        &lt;/hong-lang-man&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>在调用时，不只要写子组件的双标签，还要用<code>template</code>占位，<code>v-slot</code>绑定插槽名。</p>
<h3 id="10-具名插槽简写和作用域插槽"><a href="#10-具名插槽简写和作用域插槽" class="headerlink" title="10. 具名插槽简写和作用域插槽"></a>10. 具名插槽简写和作用域插槽</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc347">具名插槽的简写方法</a></p>
<p>在父模板中确定插槽位置时，<code>v-slot:one</code>可以简写成<code>#one</code>。这时候的代码就变成了下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;hong-lang-man&gt;</span><br><span class="hljs-string">        &lt;template #one&gt;&lt;div&gt;1.女宾一位，请上三楼。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">        &lt;template #two&gt;&lt;div&gt;3.顾客选择了全身SPA。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">    &lt;/hong-lang-man&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc348">作用域插槽-基础代码准备</a></p>
<p>其实作用域插槽主要解决的问题是，子组件中有插槽，也有变量，这些变量如何在父组件中进行使用，在页面上显示出循环的值：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;body&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">    &lt;list /&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">    `</span></span></span><br><span class="language-javascript"><span class="language-xml">		&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">		app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;list&#x27;</span>,&#123;</span></span><br><span class="language-javascript"><span class="language-xml">		    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;</span></span><br><span class="language-javascript"><span class="language-xml">		        <span class="hljs-keyword">return</span>&#123;</span></span><br><span class="language-javascript"><span class="language-xml">		            <span class="hljs-attr">lists</span>:[<span class="hljs-string">&#x27;mm&#x27;</span>,<span class="hljs-string">&#x27;ll&#x27;</span>,<span class="hljs-string">&#x27;yy&#x27;</span>]</span></span><br><span class="language-javascript"><span class="language-xml">		        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">		</span></span><br><span class="language-javascript"><span class="language-xml">		    &#125;,</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">        &lt;div&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">            &lt;div v-for=&quot;item in lists&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">        &lt;/div&gt;</span></span></span><br><span class="hljs-string"><span class="language-javascript"><span class="language-xml">    `</span></span></span><br><span class="language-javascript"><span class="language-xml">		&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br>&lt;/body&gt;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc349">作用域插槽-具体讲解</a></p>
<p>改造子组件，增加<code>slot</code>插槽，增加插槽后的模板代码如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;div&gt;</span><br><span class="hljs-string">        &lt;slot v-for=&quot;item in list&quot;  /&gt;    </span><br><span class="hljs-string">    &lt;/div&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>那么，父组件如何使用子组件中的变量来显示呢？</p>
<p>父组件想使用子组件插槽中的值，使用<code>:</code>绑定的形式进行传递，比如写成<code>:item=&quot;item&quot;</code>，具体的代码可以写成下面的样子：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;List&#x27;</span>, &#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">lists</span>:[<span class="hljs-string">&#x27;mm&#x27;</span>,<span class="hljs-string">&#x27;ll&#x27;</span>,<span class="hljs-string">&#x27;yy&#x27;</span>]<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            &lt;slot v-for=&quot;item in list&quot; :item=&quot;item&quot; /&gt;    </span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br></code></pre></td></tr></table></figure>
<p>写完后父组件中用<code>v-slot=&quot;xxx&quot;</code>的形式接受，接收后就可以使用了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;list v-slot=&quot;props&quot;&gt; </span><br><span class="hljs-string">        &lt;span&gt;&#123;&#123;props.item&#125;&#125;&lt;/span&gt; </span><br><span class="hljs-string">    &lt;/list&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这里的<code>props</code>是子组件传递过来的数据对象<code>data()</code>，所以我们要加上<code>.item</code>才能使用。可以把代码修改一下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;list v-slot=<span class="hljs-string">&quot;props&quot;</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;props.item&#125;&#125;-&#123;&#123;props&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> <br>&lt;/list&gt;<br></code></pre></td></tr></table></figure>
<p>输出结果如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">mm-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;mm&quot;</span> &#125;<br>ll-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;ll&quot;</span> &#125;<br>yy-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;yy&quot;</span> &#125;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc350">简化作用域插槽写法</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;list v-slot=&quot;&#123;item&#125;&quot;&gt; </span><br><span class="hljs-string">            &lt;div&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt; </span><br><span class="hljs-string">        &lt;/list&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>插槽直接接受数据对象的<code>&#123;item&#125;</code>，作为变量以字面量的形式显示。</p>
<h3 id="11-动态组件和状态保存"><a href="#11-动态组件和状态保存" class="headerlink" title="11. 动态组件和状态保存"></a>11. 动态组件和状态保存</h3><p>现在来虚拟一个需求，为菜单编写一个带图片的选择菜的功能，并且可以让顾客手动切换这些菜。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc353">创建子组件</a></p>
<p>现在创建两个子组件，用来展示照片。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;tuone&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;img src=&quot;./photo33.jpeg&quot; /&gt;`</span><br>&#125;)<br><br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;tutwo&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;img src=&quot;./photo35.jpeg&quot; /&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在父组件中直接使用这两个组件。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临&lt;/h2&gt; </span><br><span class="hljs-string">        &lt;tuone /&gt;</span><br><span class="hljs-string">    		&lt;tutwo /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc354">原始切换效果</a></p>
<p>现在的需求是如果显示其中一个组件，另一个组件就不显示。这里我最先想到的是用<code>v-show</code>这种代码来实现。</p>
<p>我们先来定义一个数据项，用来控制显示那个组件，数据项叫做<code>showItem</code>，然后在两个子组件的位置增加<code>v-show</code>属性，控制最终的显示。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span>&#123;<br>                <span class="hljs-attr">showItem</span>:<span class="hljs-string">&#x27;tuone&#x27;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;tuone v-show=&#x27;showItem===&quot;tuone&quot;&#x27;/&gt;</span><br><span class="hljs-string">        &lt;tutwo v-show=&#x27;showItem===&quot;tutwo&quot;&#x27;/&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的<code>showItem</code>值是<code>tuone</code>，所以浏览器中只显示<code>tuone</code>的组件。</p>
<p>然后再编写一个按钮，用来切换两个组件，按钮需要绑定一个方法<code>handleClick</code>,方法中我使用了三元运算符来编写这部分内容。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>:&#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">showItem</span>=showItem==<span class="hljs-string">&#x27;tuone&#x27;</span>?<span class="hljs-string">&#x27;tutwo&#x27;</span>:<span class="hljs-string">&#x27;tuone&#x27;</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc355">动态组件优化代码</a></p>
<p>使用<code>动态组件</code>的编程方式，省略<code>v-show</code>代码，让代码看起来更加的优雅。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span>&#123;<br>            <span class="hljs-attr">showItem</span>:<span class="hljs-string">&#x27;tuone&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">methods</span>:&#123;<br>        <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">showItem</span>=<span class="hljs-variable language_">this</span>.<span class="hljs-property">showItem</span>==<span class="hljs-string">&#x27;tuone&#x27;</span>?<span class="hljs-string">&#x27;tutwo&#x27;</span>:<span class="hljs-string">&#x27;tuone&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;component :is=&quot;showItem&quot; /&gt;</span><br><span class="hljs-string">    &lt;button @click=&#x27;handleClick&#x27;&gt;换菜&lt;/button&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>有了这段简短的代码，就可以删除掉下面这两句代码了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dajiao  v-show=<span class="hljs-string">&quot;showItem===&#x27;dajiao&#x27;&quot;</span> /&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">liuying</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;showItem===&#x27;liuying&#x27;&quot;</span> /&gt;</span></span><br></code></pre></td></tr></table></figure>
<p>意思是，使用一个动态组件<code>component</code>展示组件，具体展示哪个由数据项<code>showItem</code>决定，它的值是<code>tuone</code>就显示第一个组件，它的值是<code>tutwo</code>，就显示第二个组件。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc356">动态组件中的状态保存</a></p>
<p>动态组件用起来非常方便，但是有一点小问题，把照片变成一个<code>input</code>框。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;dajiao&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;input /&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>在切换组件后。<code>input</code>框中的文字是无法保存的。</p>
<p>为了保存<code>input</code>框中的文字，可以使用<code>&lt;keep-alive&gt;</code>标签，把动态组件包裹起来。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;keep-alive&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;showItem&quot;</span> /&gt;</span></span><br>&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure>
<p>这时候相当启用了缓存，把<code>input</code>框的值存了起来。在使用动态组件时，经常配合<code>&lt;keep-alive&gt;</code>标签一起使用。</p>
<h3 id="12-异步组件和Promise讲解"><a href="#12-异步组件和Promise讲解" class="headerlink" title="12.异步组件和Promise讲解"></a>12.异步组件和Promise讲解</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc358">编写基本代码和同步组件</a></p>
<p>编写一个同步组件（其实以前学的全部都是同步组件），并在父组件里使用它。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  &lt;div&gt;&lt;tongbu /&gt;&lt;/div&gt;`</span><br>&#125;)<br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;tongbu&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;JSPang.com&lt;/div&gt;`</span><br>&#125;)<br><br><span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br></code></pre></td></tr></table></figure>
<p>这时候就是一个同步组件，因为调用后，代码直接就会被执行。那我们了解同步组件后，我们再了解一下异步组件。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc359">vue3中的异步组件</a></p>
<p>异步组件就是在调用组件时，这个组件并不立即渲染，而是要等带一些业务逻辑完成后，才会进行执行组件内的逻辑和渲染到页面上。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;async-component&#x27;</span>,<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>            <span class="hljs-title function_">resolve</span>(&#123;<br>                <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;这是一个异步组件&lt;/div&gt;`</span><br>            &#125;)<br>        &#125;,<span class="hljs-number">3000</span>)<br>    &#125;)<br><br>&#125;))<br></code></pre></td></tr></table></figure>
<p>新建了一个组件，然后用<code>defineAsyncComponent()</code>声明这是一个异步组件，在组件内部我们用<code>Promise</code>来完成逻辑。逻辑非常简单，用<code>setTimeout</code>控制3秒后渲染模板<code>template</code>，展示内容。也就是说3秒后，组件才知道最终展示的内容是什么。这就是一个典型的异步组件。</p>
<p>异步组件经常在去后台请求数据的时候进行使用，也可以把一个大项目拆分成很多小的异步组件，然后根据需要，异步加载这些小项目。</p>
<h3 id="13-provide和inject多级组件传值"><a href="#13-provide和inject多级组件传值" class="headerlink" title="13.provide和inject多级组件传值"></a>13.provide和inject多级组件传值</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc361">创建一个多级组件</a></p>
<p>写一个子组件，然后子组件里调用另一个子组件（也可以想象成孙子组件），然后从最上层的父组件里传递值给子组件。</p>
<p>我们先来编写两个子组件的代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt; `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是子组件，我要把房子再传给我儿子。&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>基本结果和组件已经有了，下面我们看看这种情况如何传递。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc362">常用传递方式</a></p>
<p>现在的需求就是一层层传递下去，我们可以使用<code>props</code>的形式进行接收，然后继续传递，代码可以可成这样。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt;</span><br><span class="hljs-string">            &lt;child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">         `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是子组件，我要把房子再传给我儿子。&lt;/div&gt;</span><br><span class="hljs-string">            &lt;div&gt;儿子接收&#123;&#123;house&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">            &lt;child-child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">            &lt;div&gt;孙子接收&#123;&#123;house&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>这时候到浏览器中查看一下结果，可以发现结果是可以成功的。每次用props接收，然后再用绑定属性的方式传递给下一层。</p>
<p>但现在需求变化了，富豪北京三环内还有一套200平方的房子，不想通过儿子的手，直接传递给孙子，那如何操作那？</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc363">多级组件传值provide和inject</a></p>
<p>这时候就可以使用使用provide传递和inject接收了，先在数据项的下面声明一个<code>provide</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-attr">provide</span>:&#123;<br>        <span class="hljs-attr">newHouse</span>:<span class="hljs-string">&#x27;北京200平方房子一套&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt;</span><br><span class="hljs-string">        &lt;child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后儿子组件不用作任何更改，直接在孙子组件里用<code>inject</code>接收就可以了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>    <span class="hljs-attr">inject</span>:[<span class="hljs-string">&#x27;newHouse&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">        &lt;div&gt;孙子接收&#123;&#123;house&#125;&#125;,&#123;&#123;newHouse&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>写完后，可以打开浏览器中进行查看，发现孙子组件也是可以顺利接收到的。</p>
<p>这样<code>provide</code>和<code>inject</code>成对传输，就可以隔着子组件，往孙子组件传输数据了。</p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%89%8D%E7%AB%AF/" class="category-chain-item">前端</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/JavaScript/">#JavaScript</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/08/31/%E5%B0%8F%E6%A0%B7%E6%9C%AC%E5%AD%A6%E4%B9%A0%E7%BB%BC%E8%BF%B0/" title="小样本学习综述">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">小样本学习综述</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/08/25/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/" title="微信小程序开发">
                        <span class="hidden-mobile">微信小程序开发</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="vcomment" class="comment"></div> 
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
  <script>
    var notify = '' == true ? true : false;
    var verify = '' == true ? true : false;
      window.onload = function() {
          new Valine({
              el: '#vcomment',
              app_id: "AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz",
              app_key: "kMsGLN3hzkQJuLrmqQBgquFF",
              placeholder: "说点什么",
              avatar:"retro",
              visitor: true       

          });
      }
  </script>

 
  <noscript>Please enable JavaScript to view the comments</noscript>



  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  




  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.1/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>

  <script defer src="/js/leancloud.js" ></script>




  
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/yinghua.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiantiao.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiaoxingxing.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/caidai.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
