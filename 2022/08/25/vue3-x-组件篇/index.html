

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.jpg">
  <link rel="icon" href="/img/icon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="Vue3.x从零开始学 组件篇01.[组件]全局组件定义和复用性讲解一张图了解组件概念  图的左边是一个网页，网页分为了头部、左侧主体和右侧边栏。这时候你用组件的概念，就可以先把这个网页分为三个大的组件，分别是头部、左侧和右侧。然后再根据每个大组件里的内容和功能，作更加详细的组件划分。这样就可以把一个复杂的大页面，分解成一个个可以复用的小页面。 总结如下： Vue中的组件是页面中的一部分，通过层">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3.x 组件篇">
<meta property="og:url" content="http://example.com/2022/08/25/vue3-x-%E7%BB%84%E4%BB%B6%E7%AF%87/index.html">
<meta property="og:site_name" content="摸鱼之家">
<meta property="og:description" content="Vue3.x从零开始学 组件篇01.[组件]全局组件定义和复用性讲解一张图了解组件概念  图的左边是一个网页，网页分为了头部、左侧主体和右侧边栏。这时候你用组件的概念，就可以先把这个网页分为三个大的组件，分别是头部、左侧和右侧。然后再根据每个大组件里的内容和功能，作更加详细的组件划分。这样就可以把一个复杂的大页面，分解成一个个可以复用的小页面。 总结如下： Vue中的组件是页面中的一部分，通过层">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/photo21.jpeg">
<meta property="article:published_time" content="2022-08-25T06:27:54.000Z">
<meta property="article:modified_time" content="2022-08-25T06:32:33.482Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/photo21.jpeg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>vue3.x 组件篇 - 摸鱼之家</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.1","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz","app_key":"kMsGLN3hzkQJuLrmqQBgquFF","server_url":"https://awhbuajs.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>快乐老家</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                档案馆
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                目录
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/photo21.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="vue3.x 组件篇"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-25 14:27" pubdate>
          August 25, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          40k words
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">vue3.x 组件篇</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on 5 days ago
                  
                
              </p>
            
            <div class="markdown-body">
              
              <hr>
<h1 id="Vue3-x从零开始学-组件篇"><a href="#Vue3-x从零开始学-组件篇" class="headerlink" title="Vue3.x从零开始学 组件篇"></a>Vue3.x从零开始学 组件篇</h1><h3 id="01-组件-全局组件定义和复用性讲解"><a href="#01-组件-全局组件定义和复用性讲解" class="headerlink" title="01.[组件]全局组件定义和复用性讲解"></a>01.[组件]全局组件定义和复用性讲解</h3><p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc32">一张图了解组件概念</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/moyudexiaosong/picGo-use/202208251429757.png" srcset="/img/loading.gif" lazyload alt="https://newimg.jspang.com/components.png"></p>
<p>图的左边是一个网页，网页分为了头部、左侧主体和右侧边栏。这时候你用组件的概念，就可以先把这个网页分为三个大的组件，分别是头部、左侧和右侧。然后再根据每个大组件里的内容和功能，作更加详细的组件划分。这样就可以把一个复杂的大页面，分解成一个个可以复用的小页面。</p>
<p>总结如下：</p>
<p><strong>Vue中的组件是页面中的一部分，通过层层拼装，最终形成了一个完整的组件。这也是目前前端最流行的开发方式。</strong></p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc33">Vue3中根组件的讲解</a></p>
<p>学完理论，我们打开<code>VSCode</code>代码编辑器，编写一段基本的Vue3结构（因为是本季视频的第一节，所以我还是给你敲一下基本代码）。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Document&lt;/title&gt;<br>    &lt;script src=&quot;https://unpkg.com/vue@next&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>有了这段代码，在编写相应的Vue代码。用<code>createApp( )</code>创建Vue的实例，然后用<code>mount( )</code>方法挂载到<code>DOM</code>节点上。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123; &#125;)<br>    <span class="hljs-keyword">const</span> vm=app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>这时候的<code>Vue.createApp</code>实际是建立一个Vue的实例，也就是相当于刚才说的第一个<code>根组件</code>。你可以通过对象属性的形式（实际上就是方法接受一个对象实行的参数），来定义根组件的具体样式和方法。比如在根组件上定义一个模板，然后在页面输出<code>JSPang.com</code>这个网址。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;h2&gt;JSPang.com&lt;/h2&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>写好后，到浏览器中进行预览，可以在页面上看到<code>JSPang.com</code>这个网址。</p>
<p>这时候我们希望组件再多一行字，比如加上<code>技术胖</code>的中文。代码可以这样编写。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;div&gt;技术胖的博客&lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc34">全局组件的定义</a></p>
<p>现在页面上已经有两个部分组成，<code>&lt;h2&gt;JSPang.com&lt;/h2&gt;</code>和<code>&lt;div&gt;技术胖的博客&lt;/div&gt;</code>。那这时候你就可以把这两部分拆分成两个全局的字组件。代码如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;website&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">` &lt;h2&gt;JSPang.com&lt;/h2&gt;`</span><br>&#125;)<br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;describe&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">` &lt;h2&gt;技术胖的博客&lt;/h2&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>组件定义好后，可以直接在根组件上进行使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;website /&gt;</span><br><span class="hljs-string">        &lt;describe /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>现在页面上元素，就被拆分了，一个根组件下面有两个子组件。这里我们并没有什么业务逻辑，所以看起来还没有太多的作用，但是如果一旦业务逻辑复杂，我们这样拆分，会降低开发难度。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc35">组件的可复用性讲解</a></p>
<p>现在要作的事情是定义一个新的<code>计数组件</code>-count，每次点击按钮，组件中的<code>count</code>变量自动加1.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span>&#123;<br>            <span class="hljs-attr">count</span>:<span class="hljs-number">0</span><br>        &#125;<br>    &#125;,<br><br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123;count&#125;&#125;&lt;button @click=&quot;count++&quot;&gt;增加1&lt;/button&gt;&lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>写好组件以后，就可以在根组件中复用了，这里你可以加入多个<code>&lt;count /&gt;</code>组件，比如说是三个。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app=<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;website /&gt;</span><br><span class="hljs-string">        &lt;describe /&gt;</span><br><span class="hljs-string">        &lt;count/&gt;</span><br><span class="hljs-string">                &lt;count/&gt;</span><br><span class="hljs-string">                &lt;count/&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在浏览器中进行预览，你会发现<code>&lt;count /&gt;</code>是互不干扰的，就是因为这个特性，Vue中的组件就具有了复用性。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc36">全局组件的弊端</a></p>
<p>全局组件编写起来确实非常方便，当时全局组件就是你一旦定义了，就会占用系统资源。它是一直存在的，你在任何地方都可以使用这个全局组件。这势必会对性能产生影响，比如一个真实的项目，会有上千个组件，这些组件由不同人编写，如果全部是全局组件，那这个应用打开速度一定是极慢的，而且流畅度也会受到影响。</p>
<p>全局组件的概括：<strong>只要定义了，处处可以使用，性能不高，但是使用起来简单。</strong></p>
<p>那我们来总结一下:本节课我们学习了什么是Vue中的组件，如何定义全局组件，讲解了组件的复用性，然后又说了一下组件的弊端。这里需要强调的是组件对于Vue的学习非常重要，所以希望小伙伴们能重视这部分内容的学习和练习。</p>
<p>\02. [组件]Vue3中的局部组件</p>
<p>和全局组件相对应的就是局部组件，你可以把局部组件看成一个变量，然后在使用的地方注册这个组件，才可以使用。局部组件的最大好处就是只有在使用的时候，才会耗费系统资源，不像全局组件一样，一直都存在。你现在看这段话可能不能很好的理解，下面通过代码，来讲解一下什么是局部组件。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918387&amp;page=2" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc38">准备使用文件</a></p>
<p>打开<code>VSCode</code>，新建一个文件<code>Demo2.html</code>，直接复制<code>Demo1.html</code>的内容。删除一些无用内容。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Document&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: `&lt;h2&gt;JSPang.com&lt;/h2&gt;`<br>    &#125;)<br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>这时候可以打开浏览器看一下是否可以显示出正常内容。如果可以正常显示，说明一切正常。接下来就可以编写一个局部组件了。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc39">创建局部组件</a></p>
<p>注册局部组件，其实你可以理解成就是声明一个变量，这个变量是一个对象，所以最外层我们使用大括号（花括号），然后里边和使用<code>Vue.CreateApp( )</code>时传递的参数是一样的。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> counter = &#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;count&#125;&#125;&lt;button @click=&quot;count++&quot;&gt;增加1&lt;/button&gt;&lt;/div&gt;`</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>注册完组件后，我们还不能直接使用，如果直接使用会报错。这时候要作的是在<code>vue.CreateApp（ ）</code>方法里进行注册。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc310">组测局部组件</a></p>
<p>注册局部组件的方法很简单，直接用<code>components</code>属性来声明就可以了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">components</span>: &#123; counter &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;counter /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>但是这只是简写方法，正确的写法应该是<code>components: &#123; counter:counter &#125;,</code> ，其实就是给组件起个名字，你甚至可以叫做<code>jspang</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-attr">components</span>: &#123; <span class="hljs-attr">jspang</span>: counter &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;jspang /&gt;</span><br></code></pre></td></tr></table></figure>
<p>注册好后，你就可以直接在模板中使用了。需要注意的是，局部变量也是拥有独立性的，所以可以进行复用。</p>
<p>局部组件的编写有一些不成文的潜规则，下面介绍一下。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc311">局部组件使用大驼峰命名法</a></p>
<p>有时候我们的组件名字会比较长，比如写一个<code>xieDaJiao</code>组件。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> xieDaJiao = &#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h2&gt;谢大脚&lt;/h2&gt;`</span><br>    &#125;<br></code></pre></td></tr></table></figure>
<p>现在变量的名字有大小写，这时候在组测组件时，要使用这种形式（用<code>-</code>切割单词）。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">components</span>: &#123; <br>        <span class="hljs-attr">jspang</span>: counter, <br>        <span class="hljs-string">&#x27;xie-da-jiao&#x27;</span>: xieDaJiao <br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;xie-da-jiao /&gt;</span><br><span class="hljs-string">    &lt;jspang /&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>产生这种问题是因为一个矛盾点，就是变量中不能使用<code>-</code>,而组件调用确实可以的。所以为了区分组件，在定义局部组件的时候，潜规则是手写字幕进行大写，然后使用驼峰命名法。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">XieDaJiao</span> = &#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h2&gt;谢大脚&lt;/h2&gt;`</span><br>    &#125;<br></code></pre></td></tr></table></figure>
<p>这里给出本节课的全部代码，帮助你更好的学习。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Document&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const Counter = &#123;<br>        data() &#123;<br>            return &#123;<br>                count: 0<br>            &#125;<br>        &#125;,<br>        template: `&lt;div&gt;&#123;&#123;count&#125;&#125;&lt;button @click=&quot;count++&quot;&gt;增加1&lt;/button&gt;&lt;/div&gt;`<br>    &#125;<br>    const XieDaJiao = &#123;<br>        template: `&lt;h2&gt;谢大脚&lt;/h2&gt;`<br>    &#125;<br>    const app = Vue.createApp(&#123;<br>        components: &#123;<br>            jspang: Counter,<br>            &#x27;xie-da-jiao&#x27;: XieDaJiao<br>        &#125;,<br>        template: `<br>            &lt;h2&gt;JSPang.com&lt;/h2&gt;<br>            &lt;xie-da-jiao /&gt;<br>            &lt;jspang /&gt;<br><br>        `<br>    &#125;)<br>    const vm = app.mount(&quot;#app&quot;)<br><br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>\03. [组件]父子组件的静态和动态传值</p>
<p>这是2021年过完春节的第一节课（大年初五），年前和过年期间一直在陪家人，所以没有录课。如果你也很长时间没有学习了，可以稍微复习一下上节课的代码，再来学习。这节课要学习的内容是父子组件的传值，包括静态传值和动态传值。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918426&amp;page=3" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc313">准备基础代码</a></p>
<p>为了更好的演示视频，需要新建一个文件，这里就叫做<code>Demo3.html</code>,然后复制<code>Demo2.html</code>的代码，删除上节课的代码，留下基础的代码结构。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo03&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template:`&lt;h2&gt;JSPang.com&lt;/h2&gt;`<br>    &#125;)<br><br>    const vm= app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>需要说明的是，这里没有引用官方的源，而是使用了<code>bootcdn</code>的源。原因在前两节课已经说过，不在这里赘述了。有了最基础的代码，我们再来声明一个全局组件<code>Son</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;Son div &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>因为这个组件是全局的，所以定义好之后就可以直接使用了。（不用在注册声明了）</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>使用后可以到浏览器中查看效果，如果正常，此时已经形成了父子组件关系。下面就可以讲解如何从父组件向子组件传值了。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc314">父组件向子组件传值（静态传值）</a></p>
<p>子组件里的<code>Son div</code>是写死的，如果想动态的从父组件传递，可以使用属性的方式，然后子组件使用props进行接收。</p>
<p>比如我们在调用子组件的地方，通过属性<code>name</code>传递一个<code>技小胖</code>的文字进去。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son name=&quot;技小胖&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>传递后用<code>props</code>在子组件中进行接受，然后用插值表达式（双花括号<code>&#123;&#123;name&#125;&#125;</code>）的形式进行打印出来。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;name&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这样就进行了参数的接收和显示。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc315">动态数据作为参数</a></p>
<p>上面代码传递的参数是写死的，不能进行业务逻辑的编写，也就是我们常说的静态参数。如果想让代码更加的灵活，这里可以使用动态参数的传递。动态参数传递首先要把传递参数放到Vue的<strong>数据项</strong>里，也就是<code>data</code>属性里。</p>
<p>例如在<code>data</code>中声明一个name属性，然后赋值为<code>技小胖</code>。这时候需要在<code>template</code>中绑定这个name属性。这样你的值就不是静态的了，而是动态值。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;技小胖&quot;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son v-bind:name=&quot;name&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>当然<code>v-bind:name</code>也可以通过简写的方式，写成<code>:name</code>。改写后的代码如下:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;Son :name=&quot;name&quot; /&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p><strong>静态参数这里还有一个小坑需要说明一下，就是静态传递的只能是字符串类型<code>String</code>，而动态传参的就可以是多种类型了，甚至是一个函数(方法).</strong></p>
<p>传递参数的例子，在下面会详细讲解，这里先来看传递数字的例子。</p>
<p>举例说明，比如我们现在改回静态传参，而传递的内容是数字<code>123</code>,但在模板中使用<code>typeof</code>查看属性时，仍然是字符串（String）。</p>
<p>改为静态传参，参数为<code>123</code>.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;Son name=&quot;123&quot; /&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>在子组件用<code>typeof</code>查看类型，会发现仍然是<code>string</code>类型.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;name&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;&#123;&#123; typeof name&#125;&#125; div &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>但是改为动态传参，就变成了数字类型。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-number">123</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son :name=&quot;name&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc316">参数为函数时的用法</a></p>
<p>当使用动态传参时，参数几乎可以是任何类型，甚至是一个函数。下面我就举一个传递函数的例子，让你进一步的理解动态参数的作用。</p>
<p>需求是这样的，我们编写了一个<code>XiaoJieJie</code>的全局子组件，然后点击时，小姐姐会先说请付钱，然后我们传递函数的形式出给钱。</p>
<p>编写<code>小姐姐</code>的子组件:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;XiaoJieJie&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;pay&#x27;</span>],<br>    <span class="hljs-attr">methods</span>:&#123;<br>        <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;请付钱....&#x27;</span>)<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pay</span>()  <span class="hljs-comment">// 付多少钱，是顾客说的算的，所以调用时才能确定</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div @click=&quot;this.handleClick&quot;&gt; 和小姐姐，打招呼！ &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>在父组件调用的时候，<code>pay</code>是一个定义在data中的函数,然后用动态参数的形式进行调用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">name</span>:<span class="hljs-number">123</span>,<br>            <span class="hljs-attr">pay</span>:<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;给你500元&#x27;</span>)<br>            &#125;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;Son :name=&quot;name&quot; /&gt;</span><br><span class="hljs-string">        &lt;xiao-jie-jie :pay=&quot;pay&quot;/&gt;</span><br><span class="hljs-string">    `</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>下集视频我们继续讲解组件传值时的一些校验方法的编写。观看本视频，请关注微信公众号<code>技术胖</code>。</p>
<p>\04. [组件]组件传值时的校验操作</p>
<p>现在你已经可以轻松的给组件进行传值了，用起来很方便和自由，在实际开发中，这些传递的参数也很可能是通过用户的输入而获得的，必要的前端验证是必不可少的。但是在组件中也需要作最基本的验证。这节课我们就一起来学习一下Vue3中组件传值的验证。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918487&amp;page=4" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc318">准备基本文件</a></p>
<p>复制上节课<code>Demo3.html</code>代码，到<code>Demo4.html</code>中，并删掉<code>XiaoJieJie</code>自定义组件和调用的地方。为了方便你学习，这里也给出你代码，你可以直接复制使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo04&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        data() &#123;<br>            return &#123;<br>                name: 123,<br>                pay: () =&gt; &#123;<br>                    alert(&#x27;给你500元&#x27;)<br>                &#125;<br>            &#125;<br>        &#125;,<br><br>        template: `<br>            &lt;h2&gt;JSPang.com&lt;/h2&gt;<br>            &lt;Son :name=&quot;name&quot; /&gt;<br>        `<br>    &#125;)<br><br>   app.component(&#x27;Son&#x27;,&#123;<br>            props:[&#x27;name&#x27;],<br>            template:`&lt;div&gt;&#123;&#123; typeof name&#125;&#125; div &lt;/div&gt;`<br>        &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>如果你跟着视频操作，你也可以直接在<code>Demo3.html</code>文件中进行修改，这里只是讲课需要，所以另外写了一个文件。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc319">对类型的校验</a></p>
<p>有时候我们希望传递过来的属性是一个字符串，但很可能用户传递过来的就是一个数字，这时候我希望程序能给我一个提示，让我能做一些业务逻辑处理。这就涉及到了对参数类型的判断。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span><br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候代码就有了校验功能，打开<code>控制台Console</code>就可以看到提示。这里需要注意的是，这种提示不会报错和阻断程序，只是会在控制台给出<code>warn警告信息</code>。</p>
<p>这时候把数据项中的<code>123</code>，修改为字符串时，程序就不再报错了。Vue支持的校验类型包括:String、Boolean、Array、Object、Function和Symbol。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc320">必填校验和默认值设置</a></p>
<p>有些参数是必须要传递的，但有些参数就是可以不传的，当不传时。我们只要给系统一个默认值就可以了。所以有必要对这两个知识学习一下。</p>
<p><strong>required必填项</strong></p>
<p>如果要求组件使用时，必须传递参数，可以使用<code>required</code>来校验.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>                <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的校验规则就是，name的值必须是字符串，并且不可以省略。这时候可以去掉父组件调用时传递的参数，在浏览器中打开控制台看一下警告信息。</p>
<p><strong>default默认值</strong></p>
<p>再来看一下默认值的写法，在原来写<code>required</code>的地方直接写<code>default</code>就可以了。比如写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>        <span class="hljs-attr">props</span>: &#123;<br>            <span class="hljs-attr">name</span>: &#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>                <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;JSPang.com&#x27;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的意思就是在调用组件时，如果不传递参数，则默认值为<code>JSPang.com</code>。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc321">精准校验-validator</a></p>
<p>如果上面这些校验都不能满足你的要求，还可以进行精准校验。比如现在要求传递的字符串中必须包括<code>JSPang</code>这几个字符，就可以用<code>validator</code>来进行校验。它是一个函数，并接受一个<code>value</code>值，这个value就是传递过来的值。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Son&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: &#123;<br>        <span class="hljs-attr">name</span>: &#123;<br>            <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,<br>            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value.<span class="hljs-title function_">search</span>(<span class="hljs-string">&quot;JSPang&quot;</span>))<br>                <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">search</span>(<span class="hljs-string">&quot;JSPang&quot;</span>) != -<span class="hljs-number">1</span><br>            &#125;,<br>            <span class="hljs-attr">default</span>: <span class="hljs-string">&#x27;JSPang.com&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;&#123;&#123;name&#125;&#125; div &lt;/div&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>因为使用<code>search</code>来验证，返回来的是字符串出现的位置，没有找到时才显示<code>-1</code>。所以这里判定如果不为<code>-1</code>就是通过验证。</p>
<p>当没有通过验证时，就是在控制台给出警告。</p>
<p>好了，这就是本片文章的所有内容了，希望通过学习你可以知道组件传值时的验证方法。</p>
<p>\05. [组件]组件中重要机制-单项数据流</p>
<p>这节课继续讲组件传递参数时的单项数据流。它是Vue编写组件的一个重要机制，保证了组件的独立性。作为一个程序员，我们有必要知道、了解和精通单项数据流的概念和使用。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918545&amp;page=5" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc323">编写一个计数器</a></p>
<p>为了更好的说明什么是单项数据流，在文章开始前，我们需要用以前血的知识，编写一个计数器功能。</p>
<p>新建一个<code>Demo5.html</code>，然后复制<code>Demo4.html</code>的内容，删除多余无用的代码，只保留最基本的代码结构，你也可以复制下面这段代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo05&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        data() &#123;<br>            return &#123;<br><br>            &#125;<br>        &#125;,<br>        template: `<br>            &lt;h2&gt;JSPang.com&lt;/h2&gt;<br>        `<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>复制好代码后，编写一个全局组件，全局组件接受一个参数<code>counter</code>，代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &#123;&#123;counter&#125;&#125;&lt;button @click=&quot;counter+=1&quot;&gt;增加数量&lt;/button&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>编写好全局组件<code>Counter</code>后，就可以在父组件中使用了，因为Counter是传递到子组件里的，所以要在数据项<code>data</code>中进行声明。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>一切好像都很正常，但是当你在浏览器中预览的时候，你会发现点击按钮根本不起作用。这就是单向数据流机制限制的结果。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc324">单向数据流概念</a></p>
<p>什么是单向数据流？官方的解释还是比较晦涩难懂的。</p>
<ul>
<li>所有的prop都使得其父子prop之间形成了一个单向下行绑定：父级prop的更新会向下流动到子组件中，但是反过来则不行。</li>
</ul>
<p>我第一次读这段文字时，也没有搞清楚它要说的到底是什么，但是经过学习和项目后，其实单项数据流的概念就特别好理解。可以简单的说：<strong>数据从父级组件传递给子组件，只能单向绑定。子组件内部不能直接修改从父组件传递过来的数据。</strong></p>
<p>这也就是为什么，我们上面写的程序不能使用的原因了。那如何修改这个程序，让其好用那，方法很简单，在组件内的数据项中声明一个变量，把父组件传递过来的变量赋值给内部变量，然后就可以随意修改了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">newCounter</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &#123;&#123;newCounter&#125;&#125;&lt;button @click=&quot;this.newCounter+=1&quot;&gt;增加数量&lt;/button&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这样就可以进行修改了。当我们通过程序，更好的理解了什么是<code>单项数据流</code>后，我们再来总结一下。<strong>单向数据流就是父组件可以向子组件传递数据，但是子组件不能修改数据。</strong></p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc325">为什么要有单向数据流机制</a></p>
<p>单项数据流的最终目的，就是为了降低组件的耦合度和独立性。比如现在页面上同时调用了三个<code>&lt;counter/&gt;</code>组件，没有单项数据流的机制，很容易变成一个组件数值变化，其他组件的数值也跟着变化的现象。让页面组件的数据耦合在一起，没办法独立使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">    &lt;counter :counter=&quot;counter&quot;/&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>这节课学习的目的就是搞清楚什么是组件中的单项数据流的概念。</p>
<p>\06. [组件]Non-props使用技巧</p>
<p>这节课主要讲一下<code>Non-props</code>属性，那什么是<code>Non-props</code>属性那，其实就是子组件没有接受父组件传递过来的参数，而子组件完全不变的复制了属性到自己的标签上，就叫做<code>Non-props</code>属性。我相信你现在还不能完全理解这句话，无所谓，我们继续学习。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918619&amp;page=6" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc327">基础页面和子组件的准备</a></p>
<p>为了展示<code>Non-props</code>属性的风采，我们需要编写一下讲解使用的代码，你可以把这个过程当作复习。新建<code>Demo6.html</code>文件，然后复制<code>Demo5.html</code>的代码到<code>Demo5.html</code>中。删除上节课编写的代码，留下最基本的结构即可。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo06&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: ` &lt;h2&gt;JSPang.com&lt;/h2&gt;`<br>    &#125;)<br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>然后我们再编写一个Hello的全局组件，代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h3&gt;Hello World&lt;/h3&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>写好子组件后，在父组件中直接使用即可。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hello /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc328">初始Non-props 属性</a></p>
<p>上面的代码，我们并没有在子组件里接受任何传递过来的参数，就根本没有写<code>props</code>,但这时候在调用的时候，是仍然可以传值的。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;hello msg=&quot;jspang&quot; /&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你打开浏览器中的控制台，查看<code>Elements</code>标签，可以看到此时的<code>&lt;h3&gt;</code>标签上已经由了<code>msg=jspang</code>这样的属性，也就是父组件直接把属性移植给了子属性。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;h3 msg=<span class="hljs-string">&quot;jspang&quot;</span>&gt;<span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span>&lt;/h3&gt;<br></code></pre></td></tr></table></figure>
<p>如果要消除 这种移植，或者是复制，可以在子组件里接受这个属性，但并不使用他。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>     <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;msg&#x27;</span>],<br>     <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h3&gt;Hello World&lt;/h3&gt;`</span><br> &#125;)<br></code></pre></td></tr></table></figure>
<p>这时候在打开浏览器的<code>Elements</code>标签查看，就没有多余的属性了。</p>
<p>两种方式理解后，我们再来说什么是<code>Non-prop</code>属性，它就是父组件向子组件传递参数的时候，子组件不写任何的接受方法。这个时候父组件就会直接把属性完全复制给子组件，子组件也是可以得到属性值的。</p>
<p>最常见的使用案例就是直接在标签上写CSS样式。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hello style=&quot;color:red;&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候子组件会直接得到这个属性，也就把字体变成了红色。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc329">inheritAttrs属性</a></p>
<p>有些时候我们就是不想接受参数，也不想让<code>Non-props</code>属性起作用，这时候可以在子组件上使用<code>inheritAttrs</code>属性来解决这个问题。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">inheritAttrs</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h3&gt;Hello World&lt;/h3&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候style标签就不会再被复制到子组件上了，组件上的<code>Hello World</code>也不会变成红色了。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc330">Non-Prop多节点失效解决方法</a></p>
<p>刚才说了，组件在没有接受参数时，会把属性自动复制到组件的根节点上，如果组件不是一个根节点，比如写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候复制就会失效。你当然可以给他们增加一个根节点，但是在不增加根节点的条件下，也是有办法解决的。比如现在我们想让第一个组件中的<code>&lt;h3&gt;</code>标签复制父组件传递过来的属性，就可以写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">pp.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3 v-bind=&quot;$attrs&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>注意，测试的<code>$attrs</code>不是单指某一个属性，而是指全部属性。当然这里只有一个属性，所以只复制了一个，比如你再写一个属性，它也是可以复制过来的。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;hello style=&quot;color:red;&quot; msg=&quot;jspang&quot; /&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你打开浏览器，会看到两个属性都复制到了第一个<code>&lt;h3&gt;</code>标签上。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;h3 msg=<span class="hljs-string">&quot;jspang&quot;</span> style=<span class="hljs-string">&quot;color: red;&quot;</span>&gt;<span class="hljs-title class_">Hello</span> <span class="hljs-title class_">World</span>&lt;/h3&gt;<br></code></pre></td></tr></table></figure>
<p>这点需要注意一下，<code>v-bind=&quot;$attrs&quot;</code>的意思是把父组件传递的所以参数属性都复制到子组件当中。</p>
<p>如果你想只复制一个属性，比如现在我们只复制一个属性<code>style</code>，就这个这么写。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h3 v-bind=&quot;$attrs&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3 v-bind:style=&quot;$attrs.style&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">        &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候第二个<code>&lt;h3&gt;</code>标签就只复制了<code>style</code>属性。当然你也可以简写，去掉<code>v-bind</code>，而是用<code>:</code>代表。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc331">在业务逻辑中使用Non-props属性</a></p>
<p>刚才讲的都是在标签上使用<code>Non-props</code>属性，如果你想在业务逻辑中使用<code>Non-props</code>属性也是可以的。比如在生命周期中使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Hello&#x27;</span>, &#123;<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>.<span class="hljs-property">msg</span>)<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h3 v-bind=&quot;$attrs&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3 v-bind:style=&quot;$attrs.style&quot;&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    &lt;h3&gt;Hello World&lt;/h3&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后到浏览器中的控制台进行查看，就可以看到打印出了<code>jspang</code>字样。其实<code>this.$attrs</code>是Vue的一个常用属性，我们需要善于利用。</p>
<p>07 [组件]组件中通过事件进行通信</p>
<p>前面我们讲了单项数据流的概念，这节学习一下子组件如何通过事件向父组件传递参数，打破单项数据流的限制。在单项数据流中，我们用了计数器<code>Counter</code>这个例子作了个小例子，帮助大家理解。我们先来复习一下什么是单项数据流。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918725&amp;page=7" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p>通过计数器的编写，本节我们的学习目标如下:</p>
<ul>
<li>子组件调用父组件事件的编写方法</li>
<li>子组件向父组件事件中传递参数的方法</li>
<li>子组件传递参数时，如何通过<code>emits</code>进行校验</li>
</ul>
<p>直接开始我们的学习吧。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc333">编写计数器案例</a></p>
<p>新建一个文件<code>Demo7.html</code>文件，然后复制<code>Demo5.html</code>文件到<code>Demo7.html</code>中。进行修改。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo07&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        data() &#123;<br>            return &#123;<br>                counter: 0<br>            &#125;<br>        &#125;,<br>        template: `<br>                    &lt;h2&gt;JSPang.com&lt;/h2&gt;<br>                    &lt;counter :counter=&quot;counter&quot;/&gt;  <br>             `<br>    &#125;)<br>    app.component(&#x27;Counter&#x27;, &#123;<br>        props: [&#x27;counter&#x27;],<br>        template: `<br>        &#123;&#123;counter&#125;&#125;&lt;button @click=&quot;this.counter+=1&quot;&gt;增加数量&lt;/button&gt;<br>    `<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>上面的代码，当我们在浏览器中点击增加时，是不能增加<code>counter</code>的值的，这就是Vue<code>单向数据流</code>的限制。但是有时候，我们就是想在子组件里改变父组件传递过来的值，怎么办那？</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc334">子组件调用父组件事件</a></p>
<p>这时候就需要子组件调用父组件的事件，从而改变父组件里的值。我们先在父组件里编写一个方法，叫做<code>handleAddCounter</code>。这个方法就作一件事，没执行一次，数据项里的<code>counter</code>加一。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> += <span class="hljs-number">1</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>父组件有了这个方法，就可以改变<code>couter</code>数据行的值了，有方法后，现在问题就变成了，如何在子组件中调用这个方法了。</p>
<p>这时候可以先在<code>子组件</code>的模板<code>template</code>中编写一个<code>click</code>事件。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&#123;&#123;counter&#125;&#125;&lt;button @click=<span class="hljs-string">&quot;handleClick&quot;</span>&gt;增加数量&lt;/button&gt;<br></code></pre></td></tr></table></figure>
<p>子组件调用的并不是父组件中的方法，而是子组件中的方法。如果想调用父组件中的<code>handleAddConter</code>方法，这时候可以在子组件中新建一个方法<code>handleClick</code>，然后用<code>$emit</code>调用父组件的响应事件<code>add</code>。具体代码如下.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>    <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;add&#x27;</span>],<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &#123;&#123;counter&#125;&#125;&lt;button @click=&quot;handleClick&quot;&gt;增加数量&lt;/button&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的<code>add</code>是什么？<code>add</code>就是响应事件，在父组件的模板<code>template</code>中，添加一个<code>add</code>响应事件，然后响应事件再调用方法<code>handleAdCounter</code>。</p>
<p>父组件里的模板：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;h2&gt;JSPang.com&lt;/h2&gt;</span><br><span class="hljs-string">            &lt;counter :counter=&quot;counter&quot; @add=&quot;handleAddCounter&quot;/&gt;  </span><br><span class="hljs-string">        `</span><br></code></pre></td></tr></table></figure>
<p>这时候可以到浏览器看一下结果，你会发现当点击增加按钮的时候，数据项中的<code>counter</code>值，已经可以增加了。只是在控制台会打印出警告。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">[<span class="hljs-title class_">Vue</span> warn]: <span class="hljs-title class_">Extraneous</span> non-emits event listeners (add) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. <span class="hljs-title class_">If</span> the listener is intended to be a component custom event listener only, declare it using the <span class="hljs-string">&quot;emits&quot;</span> option. <br>  at &lt;<span class="hljs-title class_">Counter</span> counter=<span class="hljs-number">3</span> onAdd=fn&lt;bound handleAddCounter&gt; &gt; <br>  at &lt;<span class="hljs-title class_">App</span>&gt;<br></code></pre></td></tr></table></figure>
<p>警告的意思你调用的<code>add</code>方法，并没有用<code>emits</code>进行声明。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;Counter&#x27;</span>, &#123;<br>    <span class="hljs-attr">props</span>: [<span class="hljs-string">&#x27;counter&#x27;</span>],<br>    <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;add&#x27;</span>],<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>)<br>        &#125;<br>    &#125;,<br></code></pre></td></tr></table></figure>
<p>声明后，控制台中的警告会消失。这也是Vue对<code>子组件</code>调用父组件时的一种约束，就是调用前需要声明，否则就会报出警告。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc335">子组件向父组件传递参数</a></p>
<p>当我们不是每次想加1的时候，比如这个值是<code>子组件</code>决定的，比如是<code>2</code>吧。这时候子组件需要向父组件传值，也是可以做到的。你可以在子组件中这样编写。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>, <span class="hljs-number">2</span>)<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>然后在父组件中接受这个参数<code>param</code> (这个参数的名字你可以随便起)，为了看的方便，在控制台进行打印。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params">param</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(param)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> += param<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>这时候子组件的参数就传递给了父组件，并且可以使用了。当然你还有更好的选择，就是把所有业务逻辑都放在子组件中，然后把结果传递给父组件。我平时更喜欢用这种方式，比如代码可以写成下面的样子。 业务逻辑写在子组件里</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;add&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> + <span class="hljs-number">3</span>)<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>父组件直接接受结果就可以了</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">handleAddCounter</span>(<span class="hljs-params">param</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(param)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">counter</span> = param<br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc336">对传递值的校验</a></p>
<p>在子组件向父组件传递值的时候，还可以开启校验功能。校验是通过<code>emits</code>这个选项来声明的。比如现在我们要求传递到add中的值，不大于20。如果大于20就进行警告。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">emits</span>: &#123;<br>    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> value &lt; <span class="hljs-number">20</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>我这里的业务逻辑很简，你完全可以根据你的业务逻辑来编写验证过程。</p>
<p>这就是本节学习的内容了，我们复习一下。这节我们主要讲解了组件间，子组件调用父组件的方法和传递参数的操作。小伙伴们学习后一定要动手练习，只有动手练习才能发现问题，才能真正学会。</p>
<p>\08. [组件]组件中插槽的使用Slot -1</p>
<p>这节学习的内容是组件中的插槽(Slot)使用。为了更生动的理解插槽，我们使用红浪漫选择技师的案例。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918841&amp;page=8" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc338">编写基础结构</a></p>
<p>为了更好的讲解，我们新建一个文件<code>Demo8.html</code>，可以复制下面最基本的文件结构。复制好后，我们再编写其他代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo08&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: ` &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;`<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<p>这是最基本的一个Vue3的代码，只有一个模板<code>template</code>。然后我们新建一个全局的子组件。子组件叫做<code>技师</code>组件，里边只有一个最简单的模板。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;JiShi&#x27;</span>, &#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            &lt;span&gt;经过你的慎重考虑.最终选择了。&lt;/span&gt;</span><br><span class="hljs-string">            &lt;span&gt;</span><br><span class="hljs-string">                xxx</span><br><span class="hljs-string">            &lt;/span&gt;</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>有了子组件后，在父组件中调用这个子组件。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;ji-shi /&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的<code>XXX</code>，当然可以通过属性传递和接受的方式获得，这种方法你已经掌握了，这节我们学习一下用插槽的方式活动<code>slot</code>。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc339">初识插槽</a></p>
<p>插槽的声明很简单，只要在子组件中加入<code>&lt;slot&gt;&lt;/slot&gt;</code>标签即可，然后在父组件中使用双标签进行调用。具体代码如下:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;ji-shi &gt; 谢大脚 &lt;/ji-shi&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;JiShi&#x27;</span>, &#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            &lt;span&gt;经过你的慎重考虑.最终选择了。&lt;/span&gt;</span><br><span class="hljs-string">            &lt;span&gt;</span><br><span class="hljs-string">                &lt;slot&gt; &lt;/slot&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">            &lt;/span&gt;</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>    &#125;)<br><br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>这时候去浏览器可以看到，页面出现了我们想要的结果。你可以让页面更丰富，因为插槽支持任何的DOM元素，比如我们加入一个<code>&lt;div&gt;</code>然后让字体变成红色和50像素的字体大小。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;ji-shi &gt; &lt;div style=&quot;color:red;font-size:50px;&quot;&gt;谢大脚&lt;/div&gt; &lt;/ji-shi&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>比如现在调用两次<code>&lt;ji-shi&gt;</code>组件，给与不同的样式也是可以的。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;ji-shi &gt; &lt;div style=&quot;color:red;font-size:50px;&quot;&gt;谢大脚&lt;/div&gt; &lt;/ji-shi&gt;</span><br><span class="hljs-string">    &lt;ji-shi &gt; &lt;div style=&quot;color:green;font-size:50px;&quot;&gt;刘英&lt;/div&gt; &lt;/ji-shi&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc340">插槽中使用子组件</a></p>
<p>插槽可以强大到直接使用<code>子组件</code>，接下来就作一个在插槽中使用子组件的小例子。可以先声明一个最简单的子组件。这个子组件叫做<code>project</code>，也就是项目的意思，是为了展示我们选择技师后所作的项目。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;project&#x27;</span>, &#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;span style=&quot;color:blue;&quot;&gt;项目是胖哥老三样&lt;/span&gt;`</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>有了组件后直接可以在父组件的插槽中进行使用，代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;ji-shi &gt; </span><br><span class="hljs-string">                &lt;div style=&quot;color:red;font-size:50px;&quot;&gt;</span><br><span class="hljs-string">                    谢大脚，&lt;project /&gt;</span><br><span class="hljs-string">                &lt;/div&gt;</span><br><span class="hljs-string">        &lt;/ji-shi&gt;</span><br><span class="hljs-string">        &lt;ji-shi &gt; &lt;div style=&quot;color:green;font-size:50px;&quot;&gt;刘英&lt;/div&gt; &lt;/ji-shi&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>浏览器中预览，可以看到确实插槽中是可以放置<code>子组件</code>的。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc341">插槽中使用动态数据</a></p>
<p>插槽中也可以直接使用动态数据，也就是我们常说的数据项，比如定义一个数据项,然后在插槽中使用，直接就可以使用了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">jishi</span>: <span class="hljs-string">&#x27;晓红&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;ji-shi &gt; </span><br><span class="hljs-string">                &lt;div style=&quot;color:red;font-size:50px;&quot;&gt;</span><br><span class="hljs-string">                    &#123;&#123;jishi&#125;&#125;,&lt;project /&gt;</span><br><span class="hljs-string">                &lt;/div&gt;</span><br><span class="hljs-string">        &lt;/ji-shi&gt;</span><br><span class="hljs-string">        &lt;ji-shi &gt; &lt;div style=&quot;color:green;font-size:50px;&quot;&gt;刘英&lt;/div&gt; &lt;/ji-shi&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候需要注意的是一个变量作用域的问题，比如我们子组件里也有一个数据项<code>jishi</code>，然后给他赋值为<code>谢大脚</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;JiShi&#x27;</span>, &#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">jishi</span>: <span class="hljs-string">&#x27;谢大脚&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;div&gt;</span><br><span class="hljs-string">        &lt;span&gt;经过你的慎重考虑.最终选择了。&lt;/span&gt;</span><br><span class="hljs-string">        &lt;span&gt;</span><br><span class="hljs-string">            &lt;slot&gt; &lt;/slot&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &lt;/span&gt;</span><br><span class="hljs-string">    &lt;/div&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你会发现，浏览器中仍然显示的是<code>晓红</code>，这时候我们得出了一个结论，也是方便你记忆。</p>
<ul>
<li>父模板里调用的数据属性，使用的都是父模板里的数据</li>
<li>子模板里调用的数据属性，使用的都是子模板里的数据</li>
</ul>
<p>这节课学习的内容就到这里了，这节课算是一个初识，下节课我们继续学习插槽相关的知识。</p>
<p>\09. [组件]组件中插槽的使用Slot-2</p>
<p>这节继续讲解插槽相关的知识，在上篇文章的学习中，你已经找到了插槽的简单使用方法。这节课我带着你深入学习，看插槽中经常使用的两个编写方法，插槽的默认值和具名插槽的使用。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319918945&amp;page=9" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc343">编写一个最基本的文件</a></p>
<p>新建一个文件<code>Demo9.html</code>,然后复制下面最简单的代码结构。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo09&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: ` &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;`<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>上面的代码很简单，我们不再介绍了。为了学习插槽的默认值，我们先来复习一下上节课学习的内容，编写一个最简单的组件，并使用插槽。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc344">插槽默认值的写法</a></p>
<p>在文件中先编写一个全局的组件<code>JiShi</code>，代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;JiShi&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;</span><br><span class="hljs-string">                你选择了&lt;slot&gt;&lt;/slot&gt;为你服务。</span><br><span class="hljs-string">            &lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>有了插槽后就可以在使用组件的时候直接传递值了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;ji-shi&gt;&lt;span style=&quot;color:red;&quot;&gt;大脚&lt;/span&gt;&lt;/ji-shi&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这些都是上节的知识，我们就当做复习了。现在来了一位新客人，第一次来，不好意思点技师，那我们就需要给他一个默认值，比如默认值是“晓红”。默认值的关键语法就是在<code>&lt;slot&gt;</code>插槽中直接输入值就可以了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;JiShi&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            你选择了&lt;slot&gt;&lt;span style=&quot;color:green;&quot;&gt;晓红&lt;/span&gt;&lt;/slot&gt;为你服务。</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>现在这种编写方法，在有值传递过来的时候，会显示正常的值，没有值的时候就会显示默认值”晓红”。</p>
<p>这就是插槽中默认值的使用，如果你已经了解，我们再来学下一个知识，具名插槽。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc345">具名插槽的使用</a></p>
<p>先来看一个需求，就是如果你去洗脚城，需要经历三个过程：给顾客安排位置、选择技师、选择项目。</p>
<p>这是一个过程，是有先后顺序的，包括在页面上的显示也是要有顺序的。于是我们写了一个组件。组件代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;HongLangMan&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;</span><br><span class="hljs-string">                 &lt;div&gt;1.男宾一位，请上二楼。&lt;/div&gt;</span><br><span class="hljs-string">                 &lt;div&gt;2.你选择了大脚为你服务&lt;/div&gt;</span><br><span class="hljs-string">                 &lt;div&gt;3.你点了198元泰式按摩&lt;/div&gt;</span><br><span class="hljs-string">            &lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br></code></pre></td></tr></table></figure>
<p>程序编写的需求是这样的，选择谁为你服务不变，也就是第二个div中的内容不变。但是第一句和第三句要能在父组件里使用插槽的方法进行定义。你这时会发现程序有问题了，要把<code>&lt;slot&gt;</code>放在哪里？好像放在什么地方都不太合适，我们索性放两个<code>&lt;slot&gt;</code>，一个放在上面，一个放在下面，测试一下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;HongLangMan&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">                &lt;slot&gt;&lt;/slot&gt;</span><br><span class="hljs-string">                &lt;div&gt;2.你选择了大脚为你服务&lt;/div&gt;</span><br><span class="hljs-string">                &lt;slot&gt;&lt;/slot&gt;</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在父组件调用的时候传递对应的值，比如把代码写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hong-lang-man&gt;</span><br><span class="hljs-string">            &lt;div&gt;1.女宾一位，请上三楼。&lt;/div&gt;</span><br><span class="hljs-string">            &lt;div&gt;3.顾客选择了全身SPA。&lt;/div&gt;</span><br><span class="hljs-string">        &lt;/hong-lang-man&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你打开浏览器，会发现插槽的位置出现了两次重复的内容。也表示我们第一次的尝试失败了。</p>
<p>其实Vue中已经提供了具名插槽的使用方法，就是给<code>&lt;slot&gt;</code>标签加上一个name属性，你可以把子组件写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;HongLangMan&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">                &lt;slot name=&quot;one&quot;&gt;&lt;/slot&gt;</span><br><span class="hljs-string">                &lt;div&gt;2.你选择了大脚为你服务&lt;/div&gt;</span><br><span class="hljs-string">                &lt;slot name=&quot;two&quot;&gt;&lt;/slot&gt;</span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后父组件可以用下面的方式进行调用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;hong-lang-man&gt;</span><br><span class="hljs-string">            &lt;template v-slot:one&gt;&lt;div&gt;1.女宾一位，请上三楼。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">            &lt;template v-slot:two&gt;&lt;div&gt;3.顾客选择了全身SPA。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">        &lt;/hong-lang-man&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>到现在就可以在一个组件里，分别定义两个插槽了。希望你能学会这种方法。</p>
<p>现在来总结一下，通过这节的学习，你应该对插槽中的默认和具名插槽的使用方法有所了解。这些知识在实际开发中使用的还是比较多的，能形成良好的模块机制。</p>
<p>\10. [组件]具名插槽简写和作用域插槽</p>
<p>这节先讲一下具名插槽的简写方法，算是对上节课遗漏知识点的补充。然后再讲一下本节的重点插槽作用域，这个还是比较难理解的，所以如果你一遍学不懂。没关系，敲两遍代码，然后再来看视频或者看文章，一定可以有一个深刻的理解。先来看具名插槽的简写方法。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319919028&amp;page=10" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc347">具名插槽的简写方法</a></p>
<p>这里我们打开Demo9.html的方法，上节课我们学习了具名插槽（此处如果不会，可以看上节课的视频或者文章）。</p>
<p>在父模板中确定插槽位置时，使用了<code>v-slot:one</code>这种方法，其实这个语法可以简写成<code>#one</code>。这时候的代码就变成了下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;hong-lang-man&gt;</span><br><span class="hljs-string">        &lt;template v-slot:one&gt;&lt;div&gt;1.女宾一位，请上三楼。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">        &lt;template v-slot:two&gt;&lt;div&gt;3.顾客选择了全身SPA。&lt;/div&gt;&lt;/template&gt;</span><br><span class="hljs-string">    &lt;/hong-lang-man&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>修改后，可以打开浏览器，进行预览，发现也可以出现正确的结果。学完具名插槽的简写方法后，就可以学习这节的重点了作用域插槽。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc348">作用域插槽-基础代码准备</a></p>
<p>其实作用域插槽主要解决的问题是，子组件中有插槽，也有变量，这些变量如何在父组件中进行使用。先来看这样一个需求：编写一个子组件，里边有大脚、刘英和晓红三个名字变量，然后在子组件中用循环的形式输出出来。</p>
<p>在学习作用域插槽前，我们先来完成这个基本需求，复制Demo9的代码到Demo10.html页面中，然后留下最基础的代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo10&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: `  &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;`<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>上边就是最基础的Vue3代码，不作过多解释，你可以直接复制这段代码，开始你的学习。接下来我们要写一个子组件，满足刚才说的需求。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">            &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">            &lt;list /&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;List&#x27;</span>, &#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> &#123;<br>                <span class="hljs-attr">list</span>: [<span class="hljs-string">&#x27;大脚&#x27;</span>, <span class="hljs-string">&#x27;刘英&#x27;</span>, <span class="hljs-string">&#x27;晓红&#x27;</span>]<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;</span><br><span class="hljs-string">                &lt;div v-for=&quot;item in list&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt;    </span><br><span class="hljs-string">            &lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>上面的代码，编写了一个子组件<code>list</code>，然后在list组件里，声明了一个list的数组数据项。数据项里有三个值<code>大脚</code>、<code>刘英</code>和<code>晓红</code>。在模板中试用<code>v-for</code>的形式，进行循环。</p>
<p>写完这段代码后，可以到浏览器里调试一下，看看可以正常运行吗？如果一切正常，应该在页面上显示出循环的值了。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc349">作用域插槽-具体讲解</a></p>
<p>有了基础代码，就可以学习作用域插槽的内容了。目前子组件里循环使用的是<code>&lt;div&gt;</code>标签，现在要求这个标签是父组件调用时确定，也就是要使用插槽了。（需要说明，这种情况在你写组件时，经常遇到，所以你要足够的重视）。</p>
<p>我们刚开始的想法，可以是先改造子组件，增加<code>slot</code>插槽，增加插槽后的模板代码如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">    &lt;div&gt;</span><br><span class="hljs-string">        &lt;slot v-for=&quot;item in list&quot;  /&gt;    </span><br><span class="hljs-string">    &lt;/div&gt;</span><br><span class="hljs-string">`</span><br></code></pre></td></tr></table></figure>
<p>然后在父组件里进行调用，调用方法如下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;list&gt; &lt;span&gt;&lt;/span&gt; &lt;/list&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候在浏览器中查看，打开控制台，可以看到DOM中，是有三个<code>&lt;span&gt;</code>标签的。说明<code>DOM</code>通过插槽的形式，传递过来了。那接下来的问题，就是父组件如何使用子组件中的变量。</p>
<p>父组件想使用子组件插槽中的值，可以使用<code>:</code>绑定的形式进行传递，比如写成<code>:item=&quot;item&quot;</code>，具体的代码可以写成下面的样子。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;List&#x27;</span>, &#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>            <span class="hljs-attr">list</span>: [<span class="hljs-string">&#x27;大脚&#x27;</span>, <span class="hljs-string">&#x27;刘英&#x27;</span>, <span class="hljs-string">&#x27;晓红&#x27;</span>]<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;</span><br><span class="hljs-string">            &lt;slot v-for=&quot;item in list&quot; :item=&quot;item&quot; /&gt;    </span><br><span class="hljs-string">        &lt;/div&gt;</span><br><span class="hljs-string">    `</span><br></code></pre></td></tr></table></figure>
<p>写完后父组件中用<code>v-slot=&quot;xxx&quot;</code>的形式接受，接收后就可以使用了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">    &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">    &lt;list v-slot=&quot;props&quot;&gt; </span><br><span class="hljs-string">        &lt;span&gt;&#123;&#123;props.item&#125;&#125;&lt;/span&gt; </span><br><span class="hljs-string">    &lt;/list&gt;</span><br><span class="hljs-string">`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你会发现列表是可以正常显示的，也可以进行更换标签了，你可以试着把<code>&lt;span&gt;</code>标签换成<code>&lt;div&gt;</code>标签来尝试一下。</p>
<p>注意这里的<code>props</code>是子组件传递过来的数据都是对象，所以我们要加上<code>.item</code>才能使用。可以把代码修改一下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;list v-slot=<span class="hljs-string">&quot;props&quot;</span>&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123;props.item&#125;&#125;-&#123;&#123;props&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span> <br>&lt;/list&gt;<br></code></pre></td></tr></table></figure>
<p>输出结果如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">大脚-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;大脚&quot;</span> &#125;<br>刘英-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;刘英&quot;</span> &#125;<br>晓红-&#123; <span class="hljs-string">&quot;item&quot;</span>: <span class="hljs-string">&quot;晓红&quot;</span> &#125;<br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc350">简化作用域插槽写法</a></p>
<p>其实简化的方法也非常简单，只要使用解构的形式，这是ES6的一种写法。如果对这部分，不熟悉，可以看看ES6关于解构的语法知识。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt;</span><br><span class="hljs-string">        &lt;list v-slot=&quot;&#123;item&#125;&quot;&gt; </span><br><span class="hljs-string">            &lt;div&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt; </span><br><span class="hljs-string">        &lt;/list&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这种写法虽然简单，但是理解起来还是有些麻烦的。</p>
<p>总结一下：这节课我们主要学习了二个知识，一个是具名插槽的简写方法，第二个是作用域插槽的使用和简写方法。重点是作用域插槽，也正是因为有了作用域插槽，子组件才可以传递自身的数据项让父组件进行使用。</p>
<p>\11. [组件]动态组件和状态保存</p>
<p>这篇文章我们主要学习一下Vue3中的一个重要概念—动态组件。有的小伙伴可能一听到动态组件，会觉的很难，其实它并不难懂，而且工作中用的会比较多。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319919140&amp;page=11" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p>我们现在来虚拟一个需求，我们需要为红浪漫洗脚城编写一个带图片的选择技师的功能，并且可以让顾客手动切换这些技师。（这个需求其实有几种方法可以实现，但是这里我们为了学习，特意使用了动态组件来作，并不代表是最优解决方案。）</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc352">准备基本代码</a></p>
<p>新建一个文件<code>Demo11.html</code>，然后复制Demo10的代码内容到Demo11中，修改成最基础的代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo11&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: ` <br>            &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt; <br>        `<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>你也可以复制这段代码进行快速学习，甚至是自己手敲一遍（更能加深印象）。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc353">创建大脚子组件</a></p>
<p>现在你可以创建两个子组件，用来展示大脚和刘英的照片。先给出了课程中需要的照片地址（你也可以自己随便找一张照片来代替）</p>
<p>素材图片（图片地址直接可用）：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">谢大脚图片地址： <span class="hljs-attr">https</span>:<span class="hljs-comment">//newimg.jspang.com/xiedajiao01.jpg</span><br>刘英图片地址：   <span class="hljs-attr">https</span>:<span class="hljs-comment">//newimg.jspang.com/liuying01.jpg</span><br></code></pre></td></tr></table></figure>
<p>然后编写两个组件：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;dajiao&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;img src=&quot;https://newimg.jspang.com/xiedajiao01.jpg&quot; /&gt;`</span><br>&#125;)<br><br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;liuying&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;img src=&quot;https://newimg.jspang.com/liuying01.jpg&quot; /&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后在父组件中直接使用这两个组件。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt; </span><br><span class="hljs-string">        &lt;dajiao /&gt;</span><br><span class="hljs-string">        &lt;liuying /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候我们可以到浏览器中查看一下结果，如果结果正常，说明我们的编写的没有错误。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc354">原始切换效果</a></p>
<p>现在的需求是如果显示其中一个组件，另一个组件就不显示。这里我最先想到的是用<code>v-show</code>这种代码来实现。</p>
<p>我们先来定义一个数据项，用来控制显示那个组件，数据项叫做<code>showItem</code>，然后在两个子组件的位置增加v-show属性，控制最终的显示。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">showItem</span>:<span class="hljs-string">&#x27;dajiao&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">` </span><br><span class="hljs-string">        &lt;h2&gt;欢迎光临红浪漫-请选择您的技师&lt;/h2&gt; </span><br><span class="hljs-string">        &lt;dajiao  v-show=&quot;showItem===&#x27;dajiao&#x27;&quot; /&gt;</span><br><span class="hljs-string">        &lt;liuying v-show=&quot;showItem===&#x27;liuying&#x27;&quot; /&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候的<code>showItem</code>值是<code>dajiao</code>，所以浏览器中应该只显示<code>dajiao</code>的组件。</p>
<p>然后再编写一个按钮，用来切换两个组件，按钮需要绑定一个方法<code>handleClick</code>,方法中我使用了三元运算符来编写这部分内容。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;button @click=<span class="hljs-string">&quot;handleClick&quot;</span>&gt;切换佳丽&lt;/button&gt;<br><span class="hljs-attr">methods</span>:&#123;<br>    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">showItem</span>= <span class="hljs-variable language_">this</span>.<span class="hljs-property">showItem</span>==<span class="hljs-string">&#x27;dajiao&#x27;</span>?<span class="hljs-string">&#x27;liuying&#x27;</span>:<span class="hljs-string">&#x27;dajiao&#x27;</span><br>    &#125;<br>&#125;,<br></code></pre></td></tr></table></figure>
<p>编写到这个步骤，可以到浏览器中查看切换效果，如果没有错误，应该可以实现课程开始前说的效果了。但是这种实现方法还是比较麻烦的，而且也不优雅，所以学一下更好的实现方法。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc355">动态组件优化代码</a></p>
<p>使用<code>动态组件</code>的编程方式，就可以省略<code>v-show</code>部分的代码，也可以让代码看起来更加的优雅。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;component :is=<span class="hljs-string">&quot;showItem&quot;</span> /&gt;<br></code></pre></td></tr></table></figure>
<p>有了上面这段简短的代码，就可以删除掉下面这两句代码了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dajiao  v-show=<span class="hljs-string">&quot;showItem===&#x27;dajiao&#x27;&quot;</span> /&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">liuying</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;showItem===&#x27;liuying&#x27;&quot;</span> /&gt;</span></span><br></code></pre></td></tr></table></figure>
<p>那这决代码的意思是，使用一个动态组件，最终展示那个组件，由数据项<code>showItem</code>决定，它的值是<code>dajiao</code>就显示谢大脚的照片，它的值是<code>liuying</code>，就显示刘英的照片。</p>
<p>是不是用起来非常简单和轻松。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc356">动态组件中的状态保存</a></p>
<p>动态组件用起来非常方便，但是它有一点小问题。我们现在修改一下<code>dajiao</code>组件，把照片变成一个<code>input</code>框。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;dajiao&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;input /&gt;`</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>这时候你到浏览器中查看，并在输入框中输入文字，在切换组件后。你会发现<code>input</code>框中的文字是无法保存的。</p>
<p>为了保存<code>input</code>框中的文字，可以使用<code>&lt;keep-alive&gt;</code>标签，把动态组件包裹起来。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;keep-alive&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;showItem&quot;</span> /&gt;</span></span><br>&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure>
<p>这时候相当启用了缓存，把input框的值存了起来。在使用动态组件时，经常配合<code>&lt;keep-alive&gt;</code>标签一起使用。</p>
<p>好了，这就是本节课所学的内容了，希望你可以掌握以上两个重要知识，一个是动态组件的使用，另一个是<code>&lt;keep-alive&gt;</code>标签的使用。</p>
<p>12.[组件]异步组件和Promise讲解</p>
<p>这节我们要讲明白Vue中的异步组件，弄明白什么是异步组件，其实是有前置知识的，就是你需要知道什么是同步，什么又是异步。而且你还会要使用<code>Promise</code>,如果你Promise用的不是很熟练，建议你先去复习一下JavaScript的基础知识，然后再进行学习。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319919245&amp;page=12" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc358">编写基本代码和同步组件</a></p>
<p>新建一个文件<code>Demo12.html</code>,然后复制<code>Demo10.html</code>内容，进行修改。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo11&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: ` <br><br>        `<br>    &#125;)<br><br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>然后编写一个同步组件（其实以前学的全部都是同步组件），并在父组件里使用它。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`  &lt;div&gt;&lt;tongbu /&gt;&lt;/div&gt;`</span><br>&#125;)<br>app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;tongbu&#x27;</span>,&#123;<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;JSPang.com&lt;/div&gt;`</span><br>&#125;)<br><br><span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br></code></pre></td></tr></table></figure>
<p>这时候就是一个同步组件，因为调用后，代码直接就会被执行。那我们了解同步组件后，我们再了解一下异步组件。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc359">vue3中的异步组件</a></p>
<p>异步组件就是在调用组件时，这个组件并不立即渲染，而是要等带一些业务逻辑完成后，才会进行执行组件内的逻辑和渲染到页面上。我们先写一个异步组件，感受一下。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;async-component&#x27;</span>,<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>            <span class="hljs-title function_">resolve</span>(&#123;<br>                <span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;div&gt;这是一个异步组件&lt;/div&gt;`</span><br>            &#125;)<br>        &#125;,<span class="hljs-number">3000</span>)<br>    &#125;)<br><br>&#125;))<br></code></pre></td></tr></table></figure>
<p>这段代码中，新建了一个组件叫做<code>async-component</code>，然后用<code>defineAsyncComponent()</code>声明这是一个异步组件，在组件内部我们用<code>Promise</code>来完成逻辑。逻辑非常简单，用<code>setTimeout</code>控制3秒后渲染模板<code>template</code>，展示内容。也就是说3秒后，组件才知道最终展示的内容是什么。这就是一个典型的异步组件。</p>
<p>异步组件经常在去后台请求数据的时候进行使用，也可以把一个大项目拆分成很多小的异步组件，然后根据需要，异步加载这些小项目。</p>
<p>如果这节课的内容你还不能理解，有不要灰心。因为这节课的前置知识是你会使用Promise，你可以先去学习一下Promise的知识，然后再回来听这节课。应该可以轻松很多。</p>
<p>13.[组件]provide和inject多级组件传值</p>
<p>这节课是第二季的最后一节了，也算遗漏点的知识补充。接下来我们会推出第三季，Vue3中的动画操作，欢迎你继续和技术胖一起学习。本节的要讲的关键词是provide和inject，作用是进行多级组件传值的。</p>
<iframe src="https://player.bilibili.com/player.html?aid=417433131&amp;bvid=BV1mV411n7wn&amp;cid=319919302&amp;page=13" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="100%" style="height: 600px; border: 1px solid rgb(204, 204, 204); width: 553.281px;"></iframe>

<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc361">创建一个多级组件</a></p>
<p>新建一个文件<code>Demo13.html</code>，复制基本代码，也可以复制上节课的代码进行修改。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;!<span class="hljs-variable constant_">DOCTYPE</span> html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br><br>&lt;head&gt;<br>    &lt;meta charset=&quot;UTF-8&quot;&gt;<br>    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;<br>    &lt;title&gt;Demo13&lt;/title&gt;<br>    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.global.js&quot;&gt;&lt;/script&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;script&gt;<br>    const app = Vue.createApp(&#123;<br>        template: `&lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt;`<br>    &#125;)<br>    const vm = app.mount(&quot;#app&quot;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>现在的需求是，要写一个子组件，然后子组件里调用另一个子组件（也可以想象成孙子组件），然后从最上层的父组件里传递值给子组件。</p>
<p>我们先来编写两个子组件的代码。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt; `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是子组件，我要把房子再传给我儿子。&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>基本结果和组件已经有了，下面我们看看这种情况如何传递。</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc362">常用传递方式</a></p>
<p>现在的需求就是一层层传递下去，我们可以使用<code>props</code>的形式进行接收，然后继续传递，代码可以可成这样。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script&gt;<br>    <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>        &#125;,<br>        <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt;</span><br><span class="hljs-string">            &lt;child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">         `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是子组件，我要把房子再传给我儿子。&lt;/div&gt;</span><br><span class="hljs-string">            &lt;div&gt;儿子接收&#123;&#123;house&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">            &lt;child-child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br><br>    app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>        <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>        <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">            &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">            &lt;div&gt;孙子接收&#123;&#123;house&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">        `</span><br>    &#125;)<br>    <span class="hljs-keyword">const</span> vm = app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&quot;#app&quot;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>这时候到浏览器中查看一下结果，可以发现结果是可以成功的。每次用props接收，然后再用绑定属性的方式传递给下一层。</p>
<p>但现在需求变化了，富豪北京三环内还有一套200平方的房子，不想通过儿子的手，直接传递给孙子，那如何操作那？</p>
<p><a target="_blank" rel="noopener" href="https://jspang.com/article/69#toc363">多级组件传值provide和inject</a></p>
<p>这时候就可以使用使用provide传递和inject接收了，先在数据项的下面声明一个<code>provide</code>。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(&#123;<br>    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">house</span>:<span class="hljs-string">&#x27;北京别墅一套&#x27;</span>&#125;<br>    &#125;,<br>    <span class="hljs-attr">provide</span>:&#123;<br>        <span class="hljs-attr">newHouse</span>:<span class="hljs-string">&#x27;北京200平方房子一套&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;我有一套房子，我先传给我的儿子&lt;/div&gt;</span><br><span class="hljs-string">        &lt;child :house=&quot;house&quot; /&gt;</span><br><span class="hljs-string">        `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>然后儿子组件不用作任何更改，直接在孙子组件里用<code>inject</code>接收就可以了。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx">app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;child-child&#x27;</span>,&#123;<br>    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;house&#x27;</span>],<br>    <span class="hljs-attr">inject</span>:[<span class="hljs-string">&#x27;newHouse&#x27;</span>],<br>    <span class="hljs-attr">template</span>:<span class="hljs-string">`</span><br><span class="hljs-string">        &lt;div&gt;我是孙子，等待接收房子&lt;/div&gt;</span><br><span class="hljs-string">        &lt;div&gt;孙子接收&#123;&#123;house&#125;&#125;,&#123;&#123;newHouse&#125;&#125;&lt;/div&gt;</span><br><span class="hljs-string">    `</span><br>&#125;)<br></code></pre></td></tr></table></figure>
<p>写完后，可以打开浏览器中进行查看，发现孙子组件也是可以顺利接收到的。</p>
<p>我们学习案例的层级并不多，所以你感觉不是很强烈，如果这种层级关系达到5-6级，再使用props进行传递，那就会非常麻烦，而且会有大量的代码冗余。使用<code>provide</code>和<code>inject</code>可以解决这个问题。</p>
<p>好了，《从零开始学Vue3.x-第二季-组件篇》到本季就结束了。第三季《Vue3动画篇》已经开始更新。</p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E5%89%8D%E7%AB%AF/" class="category-chain-item">前端</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/JavaScript/">#JavaScript</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/08/25/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/" title="微信小程序开发">
                        <span class="hidden-mobile">微信小程序开发</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="vcomment" class="comment"></div> 
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
  <script>
    var notify = '' == true ? true : false;
    var verify = '' == true ? true : false;
      window.onload = function() {
          new Valine({
              el: '#vcomment',
              app_id: "AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz",
              app_key: "kMsGLN3hzkQJuLrmqQBgquFF",
              placeholder: "说点什么",
              avatar:"retro",
              visitor: true       

          });
      }
  </script>

 
  <noscript>Please enable JavaScript to view the comments</noscript>



  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  




  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.1/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>

  <script defer src="/js/leancloud.js" ></script>




  
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/yinghua.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiantiao.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiaoxingxing.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/caidai.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
