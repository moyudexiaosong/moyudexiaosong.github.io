

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon.jpg">
  <link rel="icon" href="/img/icon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="项目一：外星人入侵本项目将使用Pygame模块，用于管理图形、动画乃至声音，让你能够更轻松地开发复杂的游戏。 阶段一 创建一艘飞船，可以左右移动，并且能在用户按空格键时开火。设置好这种行为后，就可以创建外星人并提高游戏的可玩性了。 先来安装Pygame，可使用pip 模块来帮助下载并安装 Python包。要安装Pygame，在终端提示符下执行如下命令： 123python3 -m pip ins">
<meta property="og:type" content="article">
<meta property="og:title" content="Python项目练习">
<meta property="og:url" content="http://example.com/2022/09/09/Python%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0/index.html">
<meta property="og:site_name" content="摸鱼之家">
<meta property="og:description" content="项目一：外星人入侵本项目将使用Pygame模块，用于管理图形、动画乃至声音，让你能够更轻松地开发复杂的游戏。 阶段一 创建一艘飞船，可以左右移动，并且能在用户按空格键时开火。设置好这种行为后，就可以创建外星人并提高游戏的可玩性了。 先来安装Pygame，可使用pip 模块来帮助下载并安装 Python包。要安装Pygame，在终端提示符下执行如下命令： 123python3 -m pip ins">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/photo30.jpeg">
<meta property="article:published_time" content="2022-09-09T15:52:46.000Z">
<meta property="article:modified_time" content="2022-09-17T10:56:34.610Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Python基础知识">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/photo30.jpeg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Python项目练习 - 摸鱼之家</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.1","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz","app_key":"kMsGLN3hzkQJuLrmqQBgquFF","server_url":"https://awhbuajs.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>快乐老家</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                档案馆
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                目录
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/photo30.jpeg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Python项目练习"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-09-09 23:52" pubdate>
          September 9, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          28k words
        
      </span>
    

    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Python项目练习</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on 17 days ago
                  
                
              </p>
            
            <div class="markdown-body">
              
              <hr>
<h3 id="项目一：外星人入侵"><a href="#项目一：外星人入侵" class="headerlink" title="项目一：外星人入侵"></a>项目一：外星人入侵</h3><p>本项目将使用Pygame模块，用于管理图形、动画乃至声音，让你能够更轻松地开发复杂的游戏。</p>
<p><strong>阶段一</strong></p>
<p>创建一艘飞船，可以左右移动，并且能在用户按空格键时开火。设置好这种行为后，就可以创建外星人并提高游戏的可玩性了。</p>
<p>先来安装Pygame，可使用pip 模块来帮助下载并安装 Python包。要安装Pygame，在终端提示符下执行如下命令：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">python3 -m pip install --user pygame<br>python3<br>import pygame<br></code></pre></td></tr></table></figure>

<p><strong>开始游戏项目</strong></p>
<p>首先创建一个空的Pygame窗口，并让这个游戏响应用户输入，设置背景色，以及加载飞船图像。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>  <span class="hljs-comment">#访问Pygame检测到的事件</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>      <span class="hljs-comment">#初始化游戏并创建游戏资源</span><br>        pygame.init()<br>        self.screen=pygame.display.set_mode((<span class="hljs-number">1200</span>,<span class="hljs-number">800</span>))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>      <span class="hljs-comment">#开始游戏的主循环</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>          <span class="hljs-comment">#监视键盘和鼠标事件</span><br>            <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>                <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span>==pygame.QUIT:<br>                    sys.exit()<br>            <span class="hljs-comment">#让最近绘制的屏幕可见</span><br>            pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  <span class="hljs-comment">#创建游戏实例并运行游戏</span><br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p>a. 导入模块</p>
<p>首先，导入模块sys和pygame 。模块pygame 包含开发游戏所需的功能，模块sys中的工具用来退出游戏。</p>
<p>b. 初始化显示窗口</p>
<p><code>pygame.init() </code>初始化背景设置，<code>pygame.display.set_mode() </code>创建一个显示窗口，游戏的所有图形元素都将在其中绘制。实参(1200, 800) 是一个元组，指定了游戏窗口的尺寸——宽1200像素、高800 像素。将这个显示窗口赋给属性<code>self.screen</code> ，让这个类中的所有方法都能够使用它。</p>
<p>c. surface元素</p>
<p>在这个游戏中，每个元素（如外星人或飞船）都是一个surface。<code>display.set_mode() </code>返回的surface表示整个游戏窗口。激活游戏的动画循环后，每经过一次循环都将自动重绘这个surface。</p>
<p>d. 运行游戏</p>
<p>方法<code>run_game()</code> 有无限循环的 while 循环，循环内用来放监听事件和事件响应。</p>
<p>c. 响应事件</p>
<p><code>pygame.event.get() </code>用于访问Pygame检测到的事件，这个函数返回一个事件列表，所有键盘和鼠标事件都将导致这个for 循环运行。</p>
<p>d. 换帧</p>
<p><code>pygame.display.flip()</code> 函数命令Pygame显示最近绘制的屏幕。在这个程序里，它每次执行while 循环时都会绘制一个空屏幕，并擦去旧屏幕。我们移动游戏元素时，<code>pygame.display.flip() </code>将不断更新屏幕，以显示元素的新位置，并且在原来的位置隐藏元素，从而营造平滑移动的效果。</p>
<p>e. 创建实例</p>
<p>创建一个游戏实例并调用<code>run_game()</code> 。如果此时运行alien_invasion.py，将看到一个空的Pygame窗口。</p>
<p><strong>设置背景色</strong></p>
<p>在Pygame中，颜色是以RGB值指定的，我们自定义一个元祖赋给self.bg_color作为RGB参数。并在while循环内调用方法<code>fill()</code> 用背景色填充屏幕，方法<code>fill() </code>用于处理surface，接受一个RGB实参，在每次循环时都用该背景色重绘屏幕。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.screen=pygame.display.set_mode((<span class="hljs-number">1200</span>,<span class="hljs-number">800</span>))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>        self.bg_color=(<span class="hljs-number">227</span>, <span class="hljs-number">234</span>, <span class="hljs-number">255</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>                <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span>==pygame.QUIT:<br>                    sys.exit()<br>            self.screen.fill((self.bg_color))<br>            pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p><strong>创建设置类</strong></p>
<p>每次给游戏添加新功能时，都要引入一些新设置。下面来编写一个settings模块，用于将所有设置都存储在一个地方，以免在代码中到处添加设置。</p>
<p>在文件夹alien_invasion中，新建一个名为settings.py的文件，并在其中添加如下Settings 类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Settings</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.screen_width=<span class="hljs-number">1200</span><br>        self.screen_height=<span class="hljs-number">800</span><br>        self.bg_color=(<span class="hljs-number">227</span>, <span class="hljs-number">234</span>, <span class="hljs-number">255</span>)<br></code></pre></td></tr></table></figure>

<p>并将 alien_invasion.py修改成下面这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.settings=Settings()       			<br>     		self.screen=pygame.display.set_mode((self.settings.screen_width,<br>                                             self.settings.screen_height))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<span class="hljs-comment">#设置窗口标题</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>                <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span>==pygame.QUIT:<br>                    sys.exit()<br>            self.screen.fill((self.settings.bg_color))<br>            pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p>创建的Settings类被赋给<code>self.settings</code>，接下来就可以作为AlienInvasion示例本身的属性来调用了。</p>
<p><strong>添加飞船图像</strong></p>
<p>为了在屏幕上绘制玩家的飞船，我们将加 载一幅图像，再使用Pygame方法blit() 绘制它。在游戏中几乎可以使用任何类型的图像文件，但使用位图（.bmp） 文件最为简单，因为Pygame默认加载位图，可使用Photoshop、 GIMP和Paint等工具将其转换为位图。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ship</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        self.screen=ai_game.screen<br>        self.screen_rect=ai_game.screen.get_rect()<br>        <span class="hljs-comment"># 加载飞船图像并获取其外接矩形。</span><br>        self.proto=pygame.image.load(<span class="hljs-string">&#x27;airsvg.svg&#x27;</span>)<br>        self.image=pygame.transform.scale(self.proto,(<span class="hljs-number">200</span>,<span class="hljs-number">100</span>))<br>        self.rect = self.image.get_rect()<br>        <span class="hljs-comment"># 对于每艘新飞船，都将其放在屏幕底部的中央。</span><br>        self.rect.midbottom = self.screen_rect.midbottom<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">blitme</span>(<span class="hljs-params">self</span>):<br>      	<span class="hljs-comment">#在指定位置绘制飞船。</span><br>        self.screen.blit(self.image, self.rect)<br>        <span class="hljs-comment">#pygame.transform.scale(Surface, (width, height), DestSurface = None) </span><br>        <span class="hljs-comment">#转化大小</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Ship<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.settings=Settings()<br>        self.screen=pygame.display.set_mode(<br>          (self.settings.screen_width,<br>           self.settings.screen_height))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>        self.ship = Ship(self)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>                <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span>==pygame.QUIT:<br>                    sys.exit()<br>            self.screen.fill((self.settings.bg_color))<br>            self.ship.blitme()<br>            pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p>Pygame之所以高效，是因为它让你能够像处理矩形（rect 对象） 一样处理所有的游戏元素。</p>
<p>Ship传进去一个当前AlienInvasion 实例的引用来访问AlienInvasion中定义的所有游戏资源。<code>get_rect()</code>函数的作用是将我们的图片的位置用代码的形式告诉我们。</p>
<p><img src="/../img/image-20220913202941197.png" srcset="/img/loading.gif" lazyload alt="image-20220913202941197"></p>
<p>调用<code>pygame.image.load() </code>加载图像，并将飞船图像的位置传递给它。该函数返回一个表示飞船的surface，将这个 surface赋给了self.image 。加载图像后，使用get_rect() 获取相应surface的属性rect ，以便后面能够把图片的位置和外框的底部中央对齐起来。</p>
<ul>
<li>处理rect 对象时，可通过设置它的属性值来指定矩形的位置。</li>
<li>让游戏元素居中，可设置相应 rect 对象的属性center 、centerx 或centery ；</li>
<li>让游戏元素与屏幕边缘对齐，可使用属性top 、bottom 、left 或right 。</li>
<li>还有一些组合属性，可同时设置两个方向，如midbottom 、midtop 、midleft 和 midright 。</li>
<li>要调整游戏元素的水平或垂直位置，可使用属性x和y ，分别是相应矩形左上角的坐标和坐标。</li>
</ul>
<p><strong><code>pygame.surface.blit()</code>方法</strong></p>
<p>假设有两个surface对象，简称为图，函数<code>B.blit(A,dest)</code>的功能就是把图A粘贴到图B上，这意味着B上的图将被A上的图覆盖，且永久不能恢复。</p>
<p><code>blit（）</code>的原型是<code>blit（source, dest, area=None, special_flags = 0）</code>，返回值为rect对象，返回被改变的画面区域，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">screen=pygame.display.set_mode(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)	<span class="hljs-comment">#screen是Surface实例，宽高各为200</span><br>screen.blit(image,(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>))		<span class="hljs-comment">#image是某图像，(10,10)是screen坐标</span><br></code></pre></td></tr></table></figure>

<p>先创建一个surface实例B，再把图A粘贴到图B的某一位置上。第二个参数为一个坐标标识，可以是一个（x，y）元组。也可以是一个（x，y，height，width）元组，也可以是一个Rect对象，Rect对象可以理解为有位置有大小的矩形。</p>
<p>pygame的坐标体系中以左上角为原点，向右向下两个方向作x轴y轴，构成坐标（x，y），注意是被画的B对象的左上角，如果这个对象是屏幕，那就是屏幕的左上角了。如果传入一个Rect对象给dest，那么blit()会使用传入Rect对象的左上角坐标，而忽略Rect的宽和高。例如：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crystal">screen = pygame.display.set_mode(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)<br>rect=image.get_rect()<br>rect.x=<span class="hljs-number">10</span><br>rect.y=<span class="hljs-number">10</span><br>screen.blit(image, rect)	<span class="hljs-comment">#效果同上边代码</span><br></code></pre></td></tr></table></figure>

<p>blit方法的第3和第4个参数都有默认值，实际使用中可以不使用这两个参数。可选参数area是一个Rect对象，表示从source的area区域取出图像绘制到screen上。</p>
<p><strong>重构</strong></p>
<p>在大型项目中，经常需要在添加新代码前重构既有代码。重构旨在简化代码结构，把一大段代码分割成多个不同的函数，易于扩展和管理。本节将把越来越长的方法 run_game() 拆分成两个辅助方法（helper method）。辅助方法在 类中执行任务，但并非是通过实例调用的。在Python中，辅助方法的名称以单个下划线打头。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Ship<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.settings=Settings()<br>        self.screen=pygame.display.set_mode((self.settings.screen_width,self.settings.screen_height))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>        self.ship = Ship(self)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            self._check_events()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>            <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>                sys.exit()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_update_screen</span>(<span class="hljs-params">self</span>):<br>        self.screen.fill((self.settings.bg_color))<br>        self.ship.blitme()<br>        pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p><strong>驾驶飞船</strong></p>
<p>下面来编写代码，在用户按左或右箭头键时做出响应。</p>
<p>a. 响应按键</p>
<p>每当用户执行动作时，都会在Pygame中注册一个事件，事件都是通过方法pygame.event.get() 获取的，因此需要在方法 _check_events() 中指定要检查哪些类型的事件。每次按键都被注册为一个KEYDOWN 事件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>        <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>            sys.exit()<br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>            <span class="hljs-keyword">if</span> event.key==pygame.K_RIGHT:<br>                self.ship.rect.x+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> event.key==pygame.K_LEFT:<br>                self.ship.rect.x-=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<p>b. 允许持续移动</p>
<p>玩家按住右键不放时，我们希望飞船不断向右移动，直到玩家松开为止。我们将让游戏检测<code>pygame.KEYUP </code>事件，以便知道玩家何时松开右键。然后，结合使用<code>KEYDOWN </code>和<code>KEYUP </code>事件以及一个名为<code>moving_right</code> 和<code>moving_left </code>的标志来实现持续移动。</p>
<p>当标志为False 时，飞船不会移动。玩家按下右键时，我们将该标志设置为True ，在玩家松开时将该标志重新设置为False 。</p>
<p>飞船的属性都由Ship 类控制，因此要给这个类添加一个名为<code>moving_right</code> 和<code>moving_left</code>的属性以及一个名为<code>update()</code> 的方法。方法<code>update()</code>检查标志的状态，在while 循环中调用这个方法，以调整飞船的位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>        <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>            sys.exit()<br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>            <span class="hljs-keyword">if</span> event.key==pygame.K_RIGHT:<br>                self.ship.moving_right=<span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> event.key==pygame.K_LEFT:<br>                self.ship.moving_left=<span class="hljs-literal">True</span><br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYUP:<br>            self.ship.moving_left=<span class="hljs-literal">False</span><br>            self.ship.moving_right=<span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>

<p>如果在keyup时让左右键标志都置为False的话，当同时按下左右键，只要松开其中一个飞机就停止动作了，这种游戏机制太严格了，还是分别检测吧。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>        <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>            sys.exit()<br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>            <span class="hljs-keyword">if</span> event.key==pygame.K_RIGHT:<br>                self.ship.moving_right=<span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> event.key==pygame.K_LEFT:<br>                self.ship.moving_left=<span class="hljs-literal">True</span><br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYUP:<br>            <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>                self.ship.moving_right = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>                self.ship.moving_left = <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>

<p>Ship类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ship</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        self.screen=ai_game.screen<br>        self.screen_rect=ai_game.screen.get_rect()<br>        self.proto=pygame.image.load(<span class="hljs-string">&#x27;airsvg.svg&#x27;</span>)<br>        self.image=pygame.transform.scale(self.proto,(<span class="hljs-number">200</span>,<span class="hljs-number">100</span>))<br>        self.rect = self.image.get_rect()<br>        self.rect.midbottom = self.screen_rect.midbottom<br>        self.moving_right=<span class="hljs-literal">False</span><br>        self.moving_left=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">blitme</span>(<span class="hljs-params">self</span>):<br>        self.screen.blit(self.image, self.rect)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> self.moving_right:<br>            self.rect.x+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> self.moving_left:<br>            self.rect.x-=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<p><strong>调整飞船的速度</strong></p>
<p>当前，每次执行while 循环时，飞船最多移动1像素，但可 在Settings 类中添加属性ship_speed ，用于控制飞船的速度。使用函数float() 将速度的值转换为小数，才能准确进行运算 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Settings</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.screen_width=<span class="hljs-number">1200</span><br>        self.screen_height=<span class="hljs-number">800</span><br>        self.bg_color=(<span class="hljs-number">230</span>, <span class="hljs-number">230</span>, <span class="hljs-number">230</span>)<br>        self.ship_speed=<span class="hljs-number">1.5</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ship</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        self.screen=ai_game.screen<br>        self.screen_rect=ai_game.screen.get_rect()<br>        self.proto=pygame.image.load(<span class="hljs-string">&#x27;airsvg.svg&#x27;</span>)<br>        self.image=pygame.transform.scale(self.proto,(<span class="hljs-number">200</span>,<span class="hljs-number">100</span>))<br>        self.rect = self.image.get_rect()<br>        self.rect.midbottom = self.screen_rect.midbottom<br>        self.moving_right=<span class="hljs-literal">False</span><br>        self.moving_left=<span class="hljs-literal">False</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">blitme</span>(<span class="hljs-params">self</span>):<br>        self.screen.blit(self.image, self.rect)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self,speed</span>):<br>        <span class="hljs-keyword">if</span> self.moving_right:<br>            self.rect.x+=<span class="hljs-built_in">float</span>(speed)<br>        <span class="hljs-keyword">elif</span> self.moving_left:<br>            self.rect.x-=<span class="hljs-built_in">float</span>(speed)<br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Ship<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.settings=Settings()<br>        self.screen=pygame.display.set_mode((self.settings.screen_width,self.settings.screen_height))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>        self.ship = Ship(self)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            self._check_events()<br>            self.ship.update(self.settings.ship_speed)<br>            self._update_screen()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>            <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>                sys.exit()<br>            <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>                <span class="hljs-keyword">if</span> event.key==pygame.K_RIGHT:<br>                    self.ship.moving_right=<span class="hljs-literal">True</span><br>                <span class="hljs-keyword">elif</span> event.key==pygame.K_LEFT:<br>                    self.ship.moving_left=<span class="hljs-literal">True</span><br>            <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYUP:<br>                <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>                    self.ship.moving_right = <span class="hljs-literal">False</span><br>                <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>                    self.ship.moving_left = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_update_screen</span>(<span class="hljs-params">self</span>):<br>        self.screen.fill((self.settings.bg_color))<br>        self.ship.blitme()<br>        pygame.display.flip()<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<p><strong>限制飞船的活动范围</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self,speed</span>):<br>    <span class="hljs-keyword">if</span> self.moving_right <span class="hljs-keyword">and</span> self.rect.right&lt;<span class="hljs-number">1200</span>:<br>        self.rect.x+=<span class="hljs-built_in">float</span>(speed)<br>    <span class="hljs-keyword">elif</span> self.moving_left <span class="hljs-keyword">and</span> self.rect.left&gt;<span class="hljs-number">0</span>:<br>        self.rect.x-=<span class="hljs-built_in">float</span>(speed)<br></code></pre></td></tr></table></figure>

<p>随着游戏的开发，方法_check_events() 将越来越长。因此将其部分代码放在两个方法中，其中一个处理KEYDOWN 事件，另一个处理KEYUP 事件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>        <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>            sys.exit()<br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>            self._check_keydown_events(event)<br>        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYUP:<br>            self._check_keyup_events(event)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_keydown_events</span>(<span class="hljs-params">self, event</span>):<br>    <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>        self.ship.moving_right = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>        self.ship.moving_left = <span class="hljs-literal">True</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_keyup_events</span>(<span class="hljs-params">self, event</span>):<br>    <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>        self.ship.moving_right = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>        self.ship.moving_left = <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>

<p><strong>全屏模式</strong></p>
<p>要在全屏模式下运行该游戏，可在<code>__init()__</code>中做如下修改：</p>
<p>创建屏幕时传入尺寸(0, 0) 以及参数<code>pygame.FULLSCREEN</code>。这让Pygame生成一个覆盖整个显示器的屏幕。由于无法预先知道屏幕的宽度和高度，要在创建屏幕后更新这些设置：使用屏幕的rect 的属性width 和height 来更新对象settings 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    pygame.init()<br>    self.settings=Settings()<br>    self.screen=pygame.display.set_mode((<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),pygame.FULLSCREEN)<br>    self.settings.screen_width=self.screen.get_rect().width<br>    self.settings.screen_height=self.screen.get_rect().height<br>    pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>    self.ship = Ship(self)<br></code></pre></td></tr></table></figure>

<p>注意：在全屏模式下运行这款游戏之前，请确认能够按Q键退出，因为Pygame默认不提供在全屏模式下退出游戏的方式。</p>
<p><strong>射击</strong></p>
<p>我们将编写在玩家按空格键时发射子弹的代码，子弹将在屏幕中向上飞行，抵达屏幕上边缘 后消失。</p>
<p>a. 添加子弹设置</p>
<p>首先，更新settings.py，存储新类Bullet 所需的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>	--snip-<br>	<span class="hljs-comment"># 子弹设置 </span><br>	self.bullet_speed = <span class="hljs-number">1.0</span> <br>	self.bullet_width = <span class="hljs-number">3</span> <br>	self.bullet_height = <span class="hljs-number">15</span> <br>	self.bullet_color = (<span class="hljs-number">60</span>, <span class="hljs-number">60</span>, <span class="hljs-number">60</span>)<br></code></pre></td></tr></table></figure>

<p>b. 创建Bullet 类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pygame <br><span class="hljs-keyword">from</span> pygame.sprite <span class="hljs-keyword">import</span> Sprite<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bullet</span>(<span class="hljs-title class_ inherited__">Sprite</span>):<br>	<span class="hljs-string">&quot;&quot;&quot;管理飞船所发射子弹的类&quot;&quot;&quot;</span><br>	<span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, ai_game</span>):<br>		<span class="hljs-string">&quot;&quot;&quot;在飞船当前位置创建一个子弹对象。&quot;&quot;&quot;</span> <br>		<span class="hljs-built_in">super</span>().__init__() <br>		self.screen = ai_game.screen <br>		self.settings = ai_game.settings <br>		self.color = self.settings.bullet_color<br>		<span class="hljs-comment">#在(0,0)处创建一个表示子弹的矩形，再设置正确的位置。 </span><br>		self.rect = pygame.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <br>		self.settings.bullet_width, 			<br>		self.settings.bullet_height) <br>		self.rect.midtop = ai_game.ship.rect.midtop<br>		<span class="hljs-comment"># 存储用小数表示的子弹位置。 </span><br>		self.y = <span class="hljs-built_in">float</span>(self.rect.y)<br></code></pre></td></tr></table></figure>

<p>Bullet 类继承了Sprite 类。通过使用精灵（sprite），可将游戏中相关的元素编组，进而同时用for循环操作编组中的所有元素。<code>pygame.sprite.group</code>中的一个值得注意的method是<code>draw(surface)</code>，可以直接将group里面的每一个sprite对象在surface上通过<code>surface.blit()</code>操作进行绘制，见下例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#创建一个sprite类实例aliens</span><br>aliens.draw(screen)<br><span class="hljs-keyword">for</span> alien <span class="hljs-keyword">in</span> aliens.sprites():<br>    screen.blit(alien.image, alien.rect)<br></code></pre></td></tr></table></figure>

<p>本例中，先调用super() 来继承Sprite，再创建子弹属性的rect</p>
<p>因为子弹并非基于图像，所以必须使用pygame.Rect() 类从头开始创建一个矩形。创建这个类的实例 时，必须提供矩形左上角的x坐标和y坐标，以及矩形的宽度和高度。我们在(0, 0)处创建这个矩形，但下一行代码就将其移到了正确的位置，因为子弹的初始位置取决于飞船当前的位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bullet</span>(<span class="hljs-title class_ inherited__">Sprite</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        self.screen=ai_game.screen<br>        self.settings=ai_game.settings<br>        self.color = self.settings.bullet_color<br>        self.rect = pygame.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, self.settings.bullet_width, self.settings.bullet_height)<br>        self.rect.midtop = ai_game.ship.rect.midtop<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self</span>):<br>        self.rect.y-=self.settings.bullet_speed<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_bullet</span>(<span class="hljs-params">self</span>):<br>        pygame.draw.ellipse(self.screen, self.color, self.rect)<br></code></pre></td></tr></table></figure>

<p>c. 将子弹存储到编组中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>	--snip-<br>	self.ship = Ship(self)<br>	self.bullets = pygame.sprite.Group()<br></code></pre></td></tr></table></figure>

<p>然后在while 循环中更新子弹的位置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        self._check_events()<br>        self.ship.update(self.settings.ship_speed,self.settings.screen_width)<br>        self.bullets.update()<br>        self._update_screen()<br></code></pre></td></tr></table></figure>

<p>d. Fire</p>
<p>e. 删除屏幕外的子弹</p>
<p>使用for循环遍历Pygame编组时，Python要求该列表的长度在整个循环中保持不变。因此不能从for 循环遍历的列表或编组中删除元素，所以必须遍历编组的副本。</p>
<p>我们使用方法copy() 来设置for 循环，从而能够在循环中修改bullets 。</p>
<p>f. 限制子弹数量</p>
<p>将未消失的子弹数限制为三颗，在创建新子弹前检查未消失的子弹数是否小于该设置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_fire_bullet</span>(<span class="hljs-params">self</span>):<br>	<span class="hljs-string">&quot;&quot;&quot;创建新子弹并将其加入编组bullets中。&quot;&quot;&quot;</span><br>	<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.bullets) &lt; self.settings.bullets_allowed:<br>		new_bullet = Bullet(self) self.bullets.add(new_bullet)<br></code></pre></td></tr></table></figure>

<p>g. 让主循环包含尽可能少的代码</p>
<p>把run_game() 中while 循环里带模块的代码都写到单独的函数里</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">from</span> ship <span class="hljs-keyword">import</span> Ship<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Settings<br><span class="hljs-keyword">from</span> settings <span class="hljs-keyword">import</span> Bullet<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AlienInvasion</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.settings=Settings()<br>        <span class="hljs-comment">#self.screen=pygame.display.set_mode((self.settings.screen_width,self.settings.screen_height))</span><br>        self.screen=pygame.display.set_mode((<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),pygame.FULLSCREEN)<br>        self.settings.screen_width=self.screen.get_rect().width<br>        self.settings.screen_height=self.screen.get_rect().height<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Alien Invasion&quot;</span>)<br>        self.ship = Ship(self)<br>        self.bullets=pygame.sprite.Group()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            self._check_events()<br>            self.ship.update(self.settings.ship_speed,self.settings.screen_width)<br>            self.bullets.update()<br>            self._update_bullets()<br>            self._update_screen()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_events</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>            <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:<br>                sys.exit()<br>            <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>                self._check_keydown_events(event)<br>            <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYUP:<br>                self._check_keyup_events(event)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_keydown_events</span>(<span class="hljs-params">self, event</span>):<br>        <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>            self.ship.moving_right = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>            self.ship.moving_left = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">elif</span> event.key==pygame.K_q:<br>            sys.exit()<br>        <span class="hljs-keyword">elif</span> event.key==pygame.K_SPACE:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.bullets)&lt;self.settings.bullets_allowed:<br>                self._fire_bullet()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_check_keyup_events</span>(<span class="hljs-params">self, event</span>):<br>        <span class="hljs-keyword">if</span> event.key == pygame.K_RIGHT:<br>            self.ship.moving_right = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">elif</span> event.key == pygame.K_LEFT:<br>            self.ship.moving_left = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_fire_bullet</span>(<span class="hljs-params">self</span>):<br>        new_bullet=Bullet(self)<br>        self.bullets.add((new_bullet))<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_update_screen</span>(<span class="hljs-params">self</span>):<br>        self.screen.fill((self.settings.bg_color))<br>        self.ship.blitme()<br>        <span class="hljs-keyword">for</span> bullet <span class="hljs-keyword">in</span> self.bullets.sprites():<br>            bullet.draw_bullet()<br>        pygame.display.flip()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_update_bullets</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> bullet <span class="hljs-keyword">in</span> self.bullets.copy():<br>            <span class="hljs-keyword">if</span> bullet.rect.bottom &lt; <span class="hljs-number">0</span>:<br>                self.bullets.remove(bullet)<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    ai=AlienInvasion()<br>    ai.run_game()<br></code></pre></td></tr></table></figure>

<h3 id="项目二：外星人生成"><a href="#项目二：外星人生成" class="headerlink" title="项目二：外星人生成"></a>项目二：外星人生成</h3><p>目标：</p>
<ol>
<li>首先在屏幕上边缘附近添加一个外星人，再生成一群外星人。</li>
<li>让这群外星人向两边和下面移动，并删除被子弹击中的外星人。</li>
<li>显示玩家拥有的飞船数量，并在玩家的飞船用完后结束游戏。</li>
</ol>
<p><strong>创建Alien类</strong></p>
<p>将每个外星人的左边距都设置为外星 人的宽度，并将上边距设置为外星人的高度。我们主要关心的是外星人的水平速度，因此精确地记录了每个外星人的水平位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Alien</span>(<span class="hljs-title class_ inherited__">Sprite</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        self.screen=ai_game.screen<br>        self.image=pygame.image.load(<span class="hljs-string">&#x27;images/alien.bmp&#x27;</span>)<br>        pygame.transform.scale(self.image,(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>))<br>        <span class="hljs-comment"># 每个外星人最初都在屏幕左上角附近。</span><br>        self.rect=self.image.get_rect()<br>        self.rect.x=self.rect.width<br>        self.rect.y=self.rect.height<br>        <span class="hljs-comment"># 存储外星人的精确水平位置。</span><br>        self.x=<span class="hljs-built_in">float</span>(self.rect.x)<br></code></pre></td></tr></table></figure>

<p><strong>创建Alien实例</strong></p>
<p>我们最终会创建一群外星人，涉及的工作量不少，因此要新建一个名为_create_fleet() 的辅助方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>	--snip-<br>	self.ship = Ship(self) <br>	self.bullets = pygame.sprite.Group() <br>	self.aliens = pygame.sprite.Group()<br>	self._create_fleet()<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_fleet</span>(<span class="hljs-params">self</span>):<br>	<span class="hljs-string">&quot;&quot;&quot;创建外星人群。&quot;&quot;&quot;</span> <br>	<span class="hljs-comment"># 创建一个外星人。 </span><br>	alien = Alien(self) <br>	self.aliens.add(alien)<br></code></pre></td></tr></table></figure>

<p>要让外星人现身，需要在_update_screen() 中对外星人编组调用方法draw() ：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">self.aliens.draw(self.screen)<br></code></pre></td></tr></table></figure>

<p>对编组调用<code>draw() </code>时，Pygame将把编组中的每个元素绘制到属性rect 指定的位置。方法draw() 接受一个参数，这个参数指定了 要将编组中的元素绘制到哪个surface上。</p>
<p><strong>创建一群外星人</strong></p>
<p>计算可用于放置外星人的水平空间，还需要在外星人之间留出一定的空间，定为外星人的宽度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">available_space_x = settings.screen_width – (<span class="hljs-number">2</span> * alien_width)<br>number_aliens_x = available_space_x // (<span class="hljs-number">2</span> * alien_width)<br></code></pre></td></tr></table></figure>

<p>Work：找一幅星星图像，并在屏幕上显示一系列随机排列的星星。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> pygame<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> pygame.sprite <span class="hljs-keyword">import</span> Sprite<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Star</span>(<span class="hljs-title class_ inherited__">Sprite</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,ai_game</span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        self.screen=ai_game.screen<br>        self.proto=pygame.image.load(<span class="hljs-string">&#x27;star.svg&#x27;</span>)<br>        self.image=pygame.transform.scale(self.proto,(<span class="hljs-number">50</span>,<span class="hljs-number">50</span>))<br>        self.rect=self.image.get_rect()<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sky</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        pygame.init()<br>        self.screen = pygame.display.set_mode((<span class="hljs-number">1200</span>,<span class="hljs-number">800</span>))<br>        pygame.display.set_caption(<span class="hljs-string">&quot;Stars&quot;</span>)<br>        self.bg_color=(<span class="hljs-number">255</span>, <span class="hljs-number">127</span>, <span class="hljs-number">80</span>)<br>        self.stars=pygame.sprite.Group()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_game</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>            self.update_screen()<br>            self.check()<br>            self.create()<br>        pygame.display.flip()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update_screen</span>(<span class="hljs-params">self</span>):<br>        self.screen.fill(self.bg_color)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():<br>            <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span>==pygame.QUIT:<br>                sys.exit()<br>            <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span>==pygame.KEYDOWN:<br>                <span class="hljs-keyword">if</span> event.key==pygame.K_q:<br>                    sys.exit()<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">self</span>):<br>        num_x=random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">20</span>)<br>        num_y=random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)<br>        <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_y):<br>            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_x):<br>                new_star=Star(self)<br>                self.stars.add(new_star)<br>                new_star.rect.x=<span class="hljs-number">100</span>+<span class="hljs-number">50</span>*num_x<br>                new_star.rect.y=<span class="hljs-number">100</span>+<span class="hljs-number">50</span>*num_y<br>        self.stars.draw(self.screen)<br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    sky=Sky()<br>    sky.run_game()<br></code></pre></td></tr></table></figure>

<p>要实现设置fleet_direction ，可将其设置为文本值，如’left’ 或’right’ ，但这样就必须编写if-elif 语句来检查外星人群的移 动方向。鉴于只有两个可能的方向，我们使用值1和-1来表示，并 在外星人群改变方向时在这两个值之间切换。</p>
<p><strong>检查外星人是否撞到了屏幕边缘</strong></p>
<p>如果外星人的rect 的属性right 大于或等于屏幕的rect 的right 属性，就说明外星人位于屏幕右边缘；如果外星人的rect 的left 属性小于或等于0，就说明外星人位于屏幕左边缘</p>
<p><strong>检测子弹与外星人的碰撞</strong></p>
<p>函数sprite.groupcollide() 将一个编组中每个元素的rect 同另一个编组中每个元素的rect 进行比较。在这里，是将每颗子弹 的rect 同每个外星人的rect 进行比较，并返回一个字典，其中包含发生了碰撞的子弹和外星人。在这个字典中，每个键都是一颗子 弹，而关联的值是被该子弹击中的外星人。</p>
<p>第一个参数为键，第二个参数为值，第三个参数为碰撞后值是否消失，第三个参数为碰撞后键是否消失。</p>
<p><strong>生成新的外星人群</strong></p>
<p>要在一群外星人被消灭后再显示一群外星人，先检查编组 aliens 是否为空。如果编组aliens 为空， 就使用方法empty() 删除bullets编组中余下的所有精灵，并新建一群外星人</p>
<p><strong>结束游戏</strong></p>
<p>检查外星人和飞船之间的碰撞，函数spritecollideany() 接受两个实参：一个精灵和一个编组。 它检查编组是否有成员与精灵发生了碰撞，并在找到与精灵发生碰撞的成员后停止遍历编组。在这里，它遍历编组aliens ，并返回找到的第一个与飞船发生碰撞的外星人。</p>
<p><u>不想看了，真的会有人用python做游戏吗</u></p>
<h4 id="项目二-数据可视化"><a href="#项目二-数据可视化" class="headerlink" title="项目二 数据可视化"></a>项目二 数据可视化</h4><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><p>Matplotlib是一个数学绘图库，是一款优秀的可视化和分析工具，本章将使用Plotly包，它生成的图表非常适合在数字设备上显示。Plotly生成的图表可根据显示设备的尺寸自动调整大小，还具备众多交互特性，如在用户将鼠标指向图表的不同部分时突出数据集的特定方面。本章将使用Plotly来分析掷骰子的结果。</p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Bar</td>
<td>绘制条形图</td>
</tr>
<tr>
<td>Barh</td>
<td>绘制水平条形图</td>
</tr>
<tr>
<td>Boxplot</td>
<td>绘制箱型图</td>
</tr>
<tr>
<td>Hist</td>
<td>绘制直方图</td>
</tr>
<tr>
<td>his2d</td>
<td>绘制2D直方图</td>
</tr>
<tr>
<td>Pie</td>
<td>绘制饼状图</td>
</tr>
<tr>
<td>Plot</td>
<td>在坐标轴上画线或者标记</td>
</tr>
<tr>
<td>Polar</td>
<td>绘制极坐标图</td>
</tr>
<tr>
<td>Scatter</td>
<td>绘制x与y的散点图</td>
</tr>
<tr>
<td>Stackplot</td>
<td>绘制堆叠图</td>
</tr>
<tr>
<td>Stem</td>
<td>用来绘制二维离散数据绘制（又称为“火柴图”）</td>
</tr>
<tr>
<td>Step</td>
<td>绘制阶梯图</td>
</tr>
<tr>
<td>Quiver</td>
<td>绘制一个二维按箭头</td>
</tr>
<tr>
<td>Imread</td>
<td>从文件中读取图像的数据并形成数组。</td>
</tr>
<tr>
<td>Imsave</td>
<td>将数组另存为图像文件。</td>
</tr>
<tr>
<td>Imshow</td>
<td>在数轴区域内显示图像。</td>
</tr>
<tr>
<td>Axes</td>
<td>在画布(Figure)中添加轴</td>
</tr>
<tr>
<td>Text</td>
<td>向轴添加文本</td>
</tr>
<tr>
<td>Title</td>
<td>设置当前轴的标题</td>
</tr>
<tr>
<td>Xlabel</td>
<td>设置x轴标签</td>
</tr>
<tr>
<td>Xlim</td>
<td>获取或者设置x轴区间大小</td>
</tr>
<tr>
<td>Xscale</td>
<td>设置x轴缩放比例</td>
</tr>
<tr>
<td>Xticks</td>
<td>获取或设置x轴刻标和相应标签</td>
</tr>
<tr>
<td>Ylabel</td>
<td>设置y轴的标签</td>
</tr>
<tr>
<td>Ylim</td>
<td>获取或设置y轴的区间大小</td>
</tr>
<tr>
<td>Yscale</td>
<td>设置y轴的缩放比例</td>
</tr>
<tr>
<td>Yticks</td>
<td>获取或设置y轴的刻标和相应标签</td>
</tr>
<tr>
<td>Figtext</td>
<td>在画布上添加文本</td>
</tr>
<tr>
<td>Figure</td>
<td>创建一个新画布</td>
</tr>
<tr>
<td>Show</td>
<td>显示数字</td>
</tr>
<tr>
<td>Savefig</td>
<td>保存当前画布</td>
</tr>
<tr>
<td>Close</td>
<td>关闭画布窗口</td>
</tr>
</tbody></table>
<p><strong>绘制简单的折线图</strong></p>
<p>使用平方数序列1、4、 9、16和25来绘制这个图表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>squares=[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">16</span>,<span class="hljs-number">25</span>]<br>fig,ax=plt.subplots()<br>ax.plot(squares)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p>创建一个名为squares 的列表，存储要用来制作图表的数据。</p>
<p>调用函数<code>subplots()</code>， 创建一个包含子图区域的画布fig，并创建一个 figure 图形对象ax。</p>
<p><code>subplots()</code> 的函数格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">fig , ax = plt.subplots(nrows, ncols)<br></code></pre></td></tr></table></figure>

<p>nrows 与 ncols 表示两个整数参数，它们指定子图所占的行数、列数。</p>
<p>函数的返回值是一个元组，包括一个图形对象和所有的 axes 对象。其中 axes 对象的数量等于 nrows * ncols，且每个 axes 对象均可通过索引值访问（从1开始），坐标原点位于左上角。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>fig,a =  plt.subplots(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>x = np.arange(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>)<br><span class="hljs-comment">#绘制平方函数</span><br>a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].plot(x,x*x)<br>a[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].set_title(<span class="hljs-string">&#x27;square&#x27;</span>)<br><span class="hljs-comment">#绘制平方根图像</span><br>a[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>].plot(x,np.sqrt(x))<br>a[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>].set_title(<span class="hljs-string">&#x27;square root&#x27;</span>)<br><span class="hljs-comment">#绘制指数函数</span><br>a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>].plot(x,np.exp(x))<br>a[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>].set_title(<span class="hljs-string">&#x27;exp&#x27;</span>)<br><span class="hljs-comment">#绘制对数函数</span><br>a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>].plot(x,np.log10(x))<br>a[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>].set_title(<span class="hljs-string">&#x27;log&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p><img src="/../img/image-20220917121348668.png" srcset="/img/loading.gif" lazyload alt="image-20220917121348668"></p>
<p>方法<code>plot() </code>，它尝试根据给定的数据以有意义的方式绘制图表。函数<code>plt.show() </code>打开Matplotlib查看器并显示绘制的图表。在查看器中，可以缩放和导航图形，还可单击磁盘图标将图表保存起来。</p>
<p><strong>修改标签文字和线条粗细</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib<br>matplotlib.rc(<span class="hljs-string">&quot;font&quot;</span>,family=<span class="hljs-string">&#x27;Adobe Heiti Std&#x27;</span>)<br>squares=[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">16</span>,<span class="hljs-number">25</span>]<br>fig,ax=plt.subplots()<br>ax.plot(squares,linewidth=<span class="hljs-number">3</span>)<br>ax.set_title(<span class="hljs-string">&#x27;sqrt&#x27;</span>,fontsize=<span class="hljs-number">24</span>)<br>ax.set_xlabel(<span class="hljs-string">&#x27;value&#x27;</span>,fontsize=<span class="hljs-number">14</span>)<br>ax.set_ylabel(<span class="hljs-string">&#x27;value.sqrt&#x27;</span>,fontsize=<span class="hljs-number">14</span>)<br>ax.tick_params(axis=<span class="hljs-string">&#x27;both&#x27;</span>,labelsize=<span class="hljs-number">14</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p>⌃+左键可以查看源代码，<code>set_title() </code>给图表指定标题，方法<code>set_xlabel() </code>和<code>set_ylabel() </code>让你能够为每条轴设置标题，方法<code>tick_params() </code>设置刻度的样式，指定的实参将影响x轴和y轴上的刻度（<code>axes=&#39;both&#39; </code>为x和y轴都有刻度）。</p>
<p><strong>校正图形</strong></p>
<p>图形更容易看清后，我们发现没有正确地绘制数据：折线图的终点指出4.0的平方为25！下面来修复这个问题。向plot() 提供一系列数时，它假设第一个数据点对应的 坐标值 为0，但这里第一个点对应的值为1。为改变这种默认行为，可向plot() 同时提供输入值和输出值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>input_values=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>squares=[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">16</span>,<span class="hljs-number">25</span>]<br>fig,ax=plt.subplots()<br>ax.plot(input_values,squares,linewidth=<span class="hljs-number">3</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p>现在plot() 将正确地绘制数据，因为同时提供了输入值和输出值，plot() 无须对输出值的生成方式做出假设，直接一一对应即可。</p>
<p><strong>使用内置样式</strong></p>
<p>打印全部内置样式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> style<br><span class="hljs-built_in">print</span>(plt.style.available)<br></code></pre></td></tr></table></figure>

<p>‘bmh’, ‘classic’, ‘dark_background’, ‘fast’, ‘fivethirtyeight’, ‘ggplot’, ‘grayscale’, ‘seaborn-bright’, ‘seaborn-muted’, ‘seaborn-notebook’, ‘seaborn-paper’, ‘seaborn-pastel’, ‘seaborn-poster’, ‘seaborn-talk’, ‘seaborn-ticks’, ‘seaborn-white’, ‘seaborn-whitegrid’, ‘seaborn’, ‘Solarize_Light2’, ‘tableau-colorblind10’, ‘_classic_test’</p>
<p>使用方法：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>背景有格线可以用：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">plt.grid(True, linestyle=<span class="hljs-string">&#x27;-.&#x27;</span>)<br></code></pre></td></tr></table></figure>

<img src="/../img/image-20220917140815396.png" srcset="/img/loading.gif" lazyload alt="image-20220917140815396" style="zoom:50%;">

<p><strong>使用scatter() 绘制散点图并设置样式</strong></p>
<p>绘制散点图，你可能想以一种颜色显示较小的值，用另一种颜色显示较大的值。绘制大型数据集时，还可对每个点都设置同样的样式，再使用不同的样式选项重新绘制某些点以示突出。</p>
<p>要绘制单个点，可使用方法scatter() 。向它传递一对<code>(x,y)</code>坐标，它将在指定位置绘制一个点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>) <br>fig, ax = plt.subplots() <br>ax.scatter(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)<br><span class="hljs-comment"># 设置x和y轴刻度标记的大小，并且刻度聚焦在点的附近，并设置刻度字体的大小</span><br>ax.tick_params(axis=<span class="hljs-string">&#x27;both&#x27;</span>, which=<span class="hljs-string">&#x27;major&#x27;</span>, labelsize=<span class="hljs-number">14</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p><strong>使用scatter() 绘制一系列点</strong></p>
<p>要绘制一系列的点，可向<code>scatter() </code>传递两个分别包含x值和y值的列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>vxs=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br>vys=[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">9</span>,<span class="hljs-number">16</span>,<span class="hljs-number">25</span>]<br>plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>)<br>fig, ax = plt.subplots()<br><span class="hljs-comment">#s=100设置点的大小</span><br>ax.scatter(vxs,vys,s=<span class="hljs-number">100</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p><strong>自动计算数据</strong></p>
<p>手工计算列表效率低下，我们可以用Python循环来完成。</p>
<p>下面是绘制1000个点的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>vxs=<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1001</span>)<br>vys=[x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> vxs]<br>plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>)<br>fig, ax = plt.subplots()<br>ax.scatter(vxs,vys,s=<span class="hljs-number">10</span>)<br><span class="hljs-comment">#axis()设置坐标范围</span><br>ax.axis([<span class="hljs-number">0</span>,<span class="hljs-number">1100</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1100000</span>])<br>plt.show()<br></code></pre></td></tr></table></figure>

<p>方法axis() 指定了每个坐标轴的取值范围，含4个参数：x和y轴的最小值和最大值。这里将x坐标轴的取值范围设置为0～1100，并将y坐标轴的取值范围设置为 0～1 100 000。</p>
<p><strong>自定义颜色</strong></p>
<p>要修改数据点的颜色，可向<code>scatter()</code> 传递参数c</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">ax.scatter(vxs,vys,c=<span class="hljs-string">&#x27;yellow&#x27;</span>,s=<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure>

<p>要指定自定义颜色，可传递参 数c ，并将其设置为一个元组，其中包含三个0～1的小数值，分别 表示红色、绿色和蓝色的分量。值越接近0，指定的颜色越深；值越接近1，指定的颜色越浅。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">ax.scatter(vxs,vys,c=(<span class="hljs-number">0</span>,<span class="hljs-number">0.58</span>,<span class="hljs-number">0.49</span>),s=<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure>

<p><strong>使用颜色渐变</strong></p>
<p>用于突出数据的规律。例如，可以用较浅的颜色来显示较小的值，并使用较深的颜色来显示较大的值。以下代码将值较小的点显示为浅蓝色，并将值较大的点显示为深蓝色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>vxs=<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1001</span>)<br>vys=[x**<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> vxs]<br>plt.style.use(<span class="hljs-string">&#x27;seaborn&#x27;</span>)<br>fig, ax = plt.subplots()<br><span class="hljs-comment">#将参数c设置成一个值列表，并使用参数cmap 告诉 pyplot 使用哪个颜色映射</span><br>ax.scatter(vxs,vys,c=vys,cmap=plt.cm.Blues,s=<span class="hljs-number">10</span>)<br>ax.axis([<span class="hljs-number">0</span>,<span class="hljs-number">1100</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1100000</span>])<br>plt.show()<br></code></pre></td></tr></table></figure>

<img src="/../img/image-20220917160441549.png" srcset="/img/loading.gif" lazyload alt="image-20220917160441549" style="zoom:50%;">

<p>注意：要了解pyplot 中所有的颜色映射，请访问Matplotlib网站主页，单击Examples，向下滚动到Color，再单击Colormaps reference。</p>
<p><strong>自动保存图表</strong></p>
<p>要让程序自动将图表保存到文件中，可将调用<code>plt.show()</code> 替换为调用<code>plt.savefig()</code> ：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.savefig(<span class="hljs-string">&#x27;squares_plot.png&#x27;</span>, bbox_inches=<span class="hljs-string">&#x27;tight&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>第一个实参指定要以什么文件名保存图表，这个文件将存储到当前程序目录下。</p>
<p>第二个实参指定将图表多余的空白区域裁剪掉。如果要保留图表周围多余的空白区域，只需省略这个实参即可。</p>
<h4 id="随机漫步"><a href="#随机漫步" class="headerlink" title="随机漫步"></a>随机漫步</h4><p>每次行走都是完全随机的、没有明确的方向，结果是由一系列随机决策决定的。</p>
<p><strong>创建RandomWalk 类</strong></p>
<p>这个类需要三个属性：一个是存储漫步次数的变量，其他两个是列表，分别存储漫步经过的每个点的 x坐标和y坐标，让每次漫步都从点(0, 0)出发。</p>
<p>RandomWalk 类只包含两个方法：方法<code>__init___() </code>和 <code>fill_walk() </code>，后者计算随机漫步经过的所有点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> choice<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RandomWalk</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,num_points=<span class="hljs-number">5000</span></span>):<br>        self.num_points=num_points<br>        self.x_values=[<span class="hljs-number">0</span>]<br>        self.y_values=[<span class="hljs-number">0</span>]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fill_walk</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.x_values)&lt;self.num_points:<br>            <span class="hljs-comment">#随机返回1或-1,决定上下左右</span><br>            x_dir=choice([<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>])<br>            x_dis=choice([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>])<br>            x_step=x_dis*x_dir<br>            y_dir = choice([<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>])<br>            y_dis = choice([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])<br>            y_step = y_dis * y_dir<br>            <span class="hljs-comment">#拒绝原地踏步</span><br>            <span class="hljs-keyword">if</span> x_step==<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> y_step == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-comment"># 计算下一个点的x值和y值，从最后一个点的坐标加上这一步走的距离中决定</span><br>            x = self.x_values[-<span class="hljs-number">1</span>] + x_step<br>            y = self.y_values[-<span class="hljs-number">1</span>] + y_step<br>            self.x_values.append(x)<br>            self.y_values.append(y)<br><br></code></pre></td></tr></table></figure>

<p><strong>绘制随机漫步图</strong></p>
<p>rw_visual.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> random_walk <span class="hljs-keyword">import</span> RandomWalk<br>rw=RandomWalk(<span class="hljs-number">100</span>)<br>rw.fill_walk()<br>plt.style.use(<span class="hljs-string">&#x27;classic&#x27;</span>)<br>fig,ax=plt.subplots()<br>ax.scatter(rw.x_values,rw.y_values,c=(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),s=<span class="hljs-number">5</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p><strong>模拟多次随机漫步</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> random_walk <span class="hljs-keyword">import</span> RandomWalk<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    rw=RandomWalk(<span class="hljs-number">1000</span>)<br>    rw.fill_walk()<br>    plt.style.use(<span class="hljs-string">&#x27;classic&#x27;</span>)<br>    fig,ax=plt.subplots() <br>    ax.scatter(rw.x_values,rw.y_values,c=(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),s=<span class="hljs-number">5</span>)<br>    plt.show()<br>    keep_running = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Make another walk? (y/n): &quot;</span>)<br>    <span class="hljs-keyword">if</span> keep_running == <span class="hljs-string">&#x27;n&#x27;</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure>

<p><strong>设置随机漫步图的样式</strong></p>
<p>本节将定制图表，以突出每次漫步的重要特征。为此，我们确定要突出的元素，如漫步的起点、 终点和经过的路径。</p>
<p>a. 给点着色</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">from</span> random_walk <span class="hljs-keyword">import</span> RandomWalk<br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    rw=RandomWalk()<br>    rw.fill_walk()<br>    plt.style.use(<span class="hljs-string">&#x27;classic&#x27;</span>)<br>    fig,ax=plt.subplots()<br>    point_num=<span class="hljs-built_in">range</span>(rw.num_points)<br>    ax.scatter(rw.x_values,rw.y_values,<br>               c=point_num,cmap=plt.cm.Blues,<br>               edgecolors=<span class="hljs-string">&#x27;none&#x27;</span>, s=<span class="hljs-number">15</span>)<br>    plt.show()<br>    keep_running = <span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Make another walk? (y/n): &quot;</span>)<br>    <span class="hljs-keyword">if</span> keep_running == <span class="hljs-string">&#x27;n&#x27;</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure>

<p>使用range() 生成了一个数字列表，其中包含的数与漫步包含的点数量相同。将参数c设置为point_numbers ，指定使用颜色映射Blues ，并传递实参edgecolors&#x3D;’none’ 以删除每个点的轮廓。最终的随机漫步图从浅蓝色渐变为深蓝色。</p>
<p>至于为什么不直接用rw.y_values给c，因为他在一直append，直接赋不太好。</p>
<img src="/../img/image-20220917164443554.png" srcset="/img/loading.gif" lazyload alt="image-20220917164443554" style="zoom:50%;">

<p>b. 重新绘制起点和终点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">ax.scatter(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, c=<span class="hljs-string">&#x27;green&#x27;</span>, edgecolors=<span class="hljs-string">&#x27;none&#x27;</span>, s=<span class="hljs-number">100</span>)<br>   <br>ax.scatter(rw.x_values[-<span class="hljs-number">1</span>], rw.y_values[-<span class="hljs-number">1</span>],<br>           c=<span class="hljs-string">&#x27;red&#x27;</span>, edgecolors=<span class="hljs-string">&#x27;none&#x27;</span>,s=<span class="hljs-number">100</span>)<br></code></pre></td></tr></table></figure>

<p>c. 隐藏坐标轴</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ax.get_xaxis().set_visible(<span class="hljs-literal">False</span>) <br>ax.get_yaxis().set_visible(<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>

<p>d. 调整尺寸以适合屏幕</p>
<p>创建图表时，可传递参数figsize 以指定生成的图形的尺寸。 需要给参数figsize 指定一个元组，向Matplotlib指出绘图窗口的尺寸，单位为英寸，如果知道当前系统 的分辨率，可通过参数dpi 向plt.subplots() 传递该分辨 率，以有效利用可用的屏幕空间。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">9</span>), dpi=<span class="hljs-number">128</span>)<br></code></pre></td></tr></table></figure>

<h4 id="使用Plotly模拟掷骰子"><a href="#使用Plotly模拟掷骰子" class="headerlink" title="使用Plotly模拟掷骰子"></a>使用Plotly模拟掷骰子</h4><p>Plotly生成的图表还是交互式的：用户将鼠标指向特定元素时，将突出显示有关该元素的信息。</p>
<p><strong>创建Die 类</strong></p>
<p>创建一个n面骰子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Die</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,num_sides=<span class="hljs-number">6</span></span>):<br>        self.num_sides=num_sides<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">roll</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> randint(<span class="hljs-number">1</span>,self.num_sides)<br></code></pre></td></tr></table></figure>

<p><strong>掷骰子</strong></p>
<p>计算每个点数出现的次数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> die <span class="hljs-keyword">import</span> Die<br>die=Die()<br>results=[]<br><span class="hljs-keyword">for</span> rn <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>    result=die.roll()<br>    results.append(result)<br>freq=[]<br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,die.num_sides+<span class="hljs-number">1</span>):<br>    fre=results.count(value)<br>    freq.append(fre)<br><span class="hljs-built_in">print</span>(freq)<br></code></pre></td></tr></table></figure>

<p><strong>绘制直方图</strong></p>
<p>绘制一个条形图，指出各种结果出现的频率</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> die <span class="hljs-keyword">import</span> Die<br><span class="hljs-keyword">from</span> plotly.graph_objs <span class="hljs-keyword">import</span> Bar, Layout<br><span class="hljs-keyword">from</span> plotly <span class="hljs-keyword">import</span> offline<br>die=Die()<br>results=[]<br><span class="hljs-keyword">for</span> rn <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>    result=die.roll()<br>    results.append(result)<br>freq=[]<br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,die.num_sides+<span class="hljs-number">1</span>):<br>    fre=results.count(value)<br>    freq.append(fre)<br><span class="hljs-comment">#Plotly不能直接接受函数range() 的结果，因此需要使用函数list() 将其转换为列表。</span><br>x_values = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, die.num_sides+<span class="hljs-number">1</span>))<br><span class="hljs-comment">#Plotly类Bar() 表示用于绘制条形图的数据集,需要一个存储x值的列表和一个存储y值的列表。</span><br>data = [Bar(x=x_values, y=freq)]<br><span class="hljs-comment">#每个坐标轴都能以不同的方式进行配置,而每个配置选项都是一个字典元素,这里只设置了坐标轴标签</span><br>x_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果&#x27;</span>&#125;<br>y_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果的频率&#x27;</span>&#125;<br><span class="hljs-comment">#类Layout() 返回一个指定图表布局和配置的对象</span><br>my_layout = Layout(title=<span class="hljs-string">&#x27;掷一个D6 1000次的结果&#x27;</span>, xaxis=x_axis_config, yaxis=y_axis_config)<br><span class="hljs-comment">#为生成图表，我们调用了函数offline.plot()</span><br><span class="hljs-comment">#这个函数需要一个包含数据和布局对象的字典，还接受一个文件名</span><br>offline.plot(&#123;<span class="hljs-string">&#x27;data&#x27;</span>: data, <span class="hljs-string">&#x27;layout&#x27;</span>: my_layout&#125;, filename=<span class="hljs-string">&#x27;d6.html&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>注意：Plotly让这个图表具有交互性，将鼠标指向其中的任意条形，就能看到与之相关联的数据。另外，注意到右上角有一些图标，让你能够平移和缩放图表以及将其保存为图像。</p>
<p><strong>同时掷两个骰子</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> die <span class="hljs-keyword">import</span> Die<br><span class="hljs-keyword">from</span> plotly.graph_objs <span class="hljs-keyword">import</span> Bar, Layout<br><span class="hljs-keyword">from</span> plotly <span class="hljs-keyword">import</span> offline<br>die1=Die()<br>die2=Die()<br>results=[]<br><span class="hljs-keyword">for</span> rn <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):<br>    result1=die1.roll()<br>    result2=die2.roll()<br>    results.append(result1+result2)<br>freq=[]<br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,(die1.num_sides+<span class="hljs-number">1</span>)*<span class="hljs-number">2</span>):<br>    fre=results.count(value)<br>    freq.append(fre)<br>x_values = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, (die1.num_sides+<span class="hljs-number">1</span>)*<span class="hljs-number">2</span>))<br>data = [Bar(x=x_values, y=freq)]<br>x_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果&#x27;</span>,<span class="hljs-string">&#x27;dtick&#x27;</span>: <span class="hljs-number">1</span>&#125;<br>y_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果的频率&#x27;</span>&#125;<br>my_layout = Layout(title=<span class="hljs-string">&#x27;掷一个D6 1000次的结果&#x27;</span>, xaxis=x_axis_config, yaxis=y_axis_config)<br>offline.plot(&#123;<span class="hljs-string">&#x27;data&#x27;</span>: data, <span class="hljs-string">&#x27;layout&#x27;</span>: my_layout&#125;, filename=<span class="hljs-string">&#x27;d6.html&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>创建图表时，在字典x_axis_config 中使设置’dtick’: 1，让Plotly显示每个刻度值。</p>
<p><strong>同时掷两个面数不同的骰子</strong></p>
<p>下面来创建一个6面骰子和一个10面骰子，看看同时掷这两个骰子 50 000次的结果如何：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> die <span class="hljs-keyword">import</span> Die<br><span class="hljs-keyword">from</span> plotly.graph_objs <span class="hljs-keyword">import</span> Bar, Layout<br><span class="hljs-keyword">from</span> plotly <span class="hljs-keyword">import</span> offline<br>die1=Die(<span class="hljs-number">6</span>)<br>die2=Die(<span class="hljs-number">10</span>)<br>results=[]<br><span class="hljs-keyword">for</span> rn <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">50_000</span>):<br>    result=die1.roll()+die2.roll()<br>    results.append(result)<br>freq=[]<br><span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,die1.num_sides+die2.num_sides+<span class="hljs-number">1</span>):<br>    fre=results.count(value)<br>    freq.append(fre)<br>x_values = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, die1.num_sides+die2.num_sides+<span class="hljs-number">1</span>))<br>data = [Bar(x=x_values, y=freq)]<br>x_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果&#x27;</span>,<span class="hljs-string">&#x27;dtick&#x27;</span>: <span class="hljs-number">1</span>&#125;<br>y_axis_config = &#123;<span class="hljs-string">&#x27;title&#x27;</span>: <span class="hljs-string">&#x27;结果的频率&#x27;</span>&#125;<br>my_layout = Layout(title=<span class="hljs-string">&#x27;掷一个D6 1000次的结果&#x27;</span>, xaxis=x_axis_config, yaxis=y_axis_config)<br>offline.plot(&#123;<span class="hljs-string">&#x27;data&#x27;</span>: data, <span class="hljs-string">&#x27;layout&#x27;</span>: my_layout&#125;, filename=<span class="hljs-string">&#x27;d6.html&#x27;</span>)<br></code></pre></td></tr></table></figure>


              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Python/" class="category-chain-item">Python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">#Python基础知识</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/09/13/Python-Day05/" title="Python Day05">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Python Day05</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/09/08/Python-Day03/" title="Python Day03">
                        <span class="hidden-mobile">Python Day03</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="vcomment" class="comment"></div> 
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
  <script>
    var notify = '' == true ? true : false;
    var verify = '' == true ? true : false;
      window.onload = function() {
          new Valine({
              el: '#vcomment',
              app_id: "AwHBUAjSP1GvDVpiBgxfS2Pg-gzGzoHsz",
              app_key: "kMsGLN3hzkQJuLrmqQBgquFF",
              placeholder: "说点什么",
              avatar:"retro",
              visitor: true       

          });
      }
  </script>

 
  <noscript>Please enable JavaScript to view the comments</noscript>



  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  




  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.1/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>

  <script defer src="/js/leancloud.js" ></script>




  
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/yinghua.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiantiao.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/xiaoxingxing.js"></script>
<script src="//cdn.jsdelivr.net/gh/bynotes/texiao/source/js/caidai.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
